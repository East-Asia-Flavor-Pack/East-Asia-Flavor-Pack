####
eafp_land_problem_add_modifier = {	#상태등급별 효과 업데이트
	eafp_land_problem_add_modifier_comp = { comp = adm }
	eafp_land_problem_add_modifier_comp = { comp = civ }
	eafp_land_problem_add_modifier_comp = { comp = mil }
	eafp_land_problem_add_modifier_building = yes
}

eafp_land_problem_add_modifier_comp = {
	remove_modifier = eafp_modi_land_problem_$comp$_lvl_0
	remove_modifier = eafp_modi_land_problem_$comp$_lvl_1
	remove_modifier = eafp_modi_land_problem_$comp$_lvl_2
	remove_modifier = eafp_modi_land_problem_$comp$_lvl_3
	remove_modifier = eafp_modi_land_problem_$comp$_lvl_4
	remove_modifier = eafp_modi_land_problem_$comp$_lvl_5

	if = {
		limit = {
			eafp_val_land_problem_$comp$ <= eafp_val_land_problem_threshold1
		}
		add_modifier = {
			name = eafp_modi_land_problem_$comp$_lvl_0
			months = 3
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_$comp$ <= eafp_val_land_problem_threshold2
			eafp_val_land_problem_$comp$ >= eafp_val_land_problem_threshold1
		}
		add_modifier = {
			name = eafp_modi_land_problem_$comp$_lvl_1
			months = 3
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_$comp$ <= eafp_val_land_problem_threshold3
			eafp_val_land_problem_$comp$ >= eafp_val_land_problem_threshold2
		}
		add_modifier = {
			name = eafp_modi_land_problem_$comp$_lvl_2
			months = 3
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_$comp$ <= eafp_val_land_problem_threshold4
			eafp_val_land_problem_$comp$ >= eafp_val_land_problem_threshold3
		}
		add_modifier = {
			name = eafp_modi_land_problem_$comp$_lvl_3
			months = 3
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_$comp$ <= eafp_val_land_problem_threshold5
			eafp_val_land_problem_$comp$ >= eafp_val_land_problem_threshold4
		}
		add_modifier = {
			name = eafp_modi_land_problem_$comp$_lvl_4
			months = 3
		}
	}
	else = {
		add_modifier = {
			name = eafp_modi_land_problem_$comp$_lvl_5
			months = 3
		}
	}
	
}
eafp_land_problem_add_modifier_building = {
	every_scope_building = {
		limit = {
			is_building_type = building_barrack
		}
		remove_modifier = eafp_modi_land_problem_building_mil_lvl_0
		remove_modifier = eafp_modi_land_problem_building_mil_lvl_1
		remove_modifier = eafp_modi_land_problem_building_mil_lvl_2
		remove_modifier = eafp_modi_land_problem_building_mil_lvl_3
		remove_modifier = eafp_modi_land_problem_building_mil_lvl_4
		remove_modifier = eafp_modi_land_problem_building_mil_lvl_5
	}
	if = {
		limit = {
			eafp_val_land_problem_mil <= eafp_val_land_problem_threshold1
		}
		every_scope_building = {
			limit = {
				is_building_type = building_barrack
			}
			add_modifier = {
				name = eafp_modi_land_problem_building_mil_lvl_0
				months = 3
			}
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_mil <= eafp_val_land_problem_threshold2
			eafp_val_land_problem_mil >= eafp_val_land_problem_threshold1
		}
		every_scope_building = {
			limit = {
				is_building_type = building_barrack
			}
			add_modifier = {
				name = eafp_modi_land_problem_building_mil_lvl_1
				months = 3
			}
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_mil <= eafp_val_land_problem_threshold3
			eafp_val_land_problem_mil >= eafp_val_land_problem_threshold2
		}
		every_scope_building = {
			limit = {
				is_building_type = building_barrack
			}
			add_modifier = {
				name = eafp_modi_land_problem_building_mil_lvl_2
				months = 3
			}
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_mil <= eafp_val_land_problem_threshold4
			eafp_val_land_problem_mil >= eafp_val_land_problem_threshold3
		}
		every_scope_building = {
			limit = {
				is_building_type = building_barrack
			}
			add_modifier = {
				name = eafp_modi_land_problem_building_mil_lvl_3
				months = 3
			}
		}
	}
	else_if = {
		limit = {
			eafp_val_land_problem_mil <= eafp_val_land_problem_threshold5
			eafp_val_land_problem_mil >= eafp_val_land_problem_threshold4
		}
		every_scope_building = {
			limit = {
				is_building_type = building_barrack
			}
			add_modifier = {
				name = eafp_modi_land_problem_building_mil_lvl_4
				months = 3
			}
		}
	}
	else = {
		every_scope_building = {
			limit = {
				is_building_type = building_barrack
			}
			add_modifier = {
				name = eafp_modi_land_problem_building_mil_lvl_5
				months = 3
			}
		}
	}
}
####
eafp_effect_option_gain_stress = {	#선지 누를때-스트레스 증감
	if = {
		limit = {
			has_journal_entry = je_korean_kings_health
			#always = no
		}
		je:je_korean_kings_health = {
			add_progress = { value = $STRESS$ name = eafp_progress_bar_kings_health }
		}
		custom_description = {
			value = $STRESS$
			text = eafp_stress_gain_from_event_option_effect_loc
		}
	}
	else_if = {
		limit = { c:KOR ?= THIS }
		custom_description = {
			value = $STRESS$
			text = eafp_stress_gain_from_event_else_effect_loc
		}
		# (0.02% of GDP + 2000) * STRESS
		add_treasury = {
			value = eafp_val_stress_cost
			multiply = $STRESS$
			max = 1000000
		}
	}
	else = {
		# (0.02% of GDP + 2000) * STRESS
		add_treasury = {
			value = eafp_val_stress_cost
			multiply = $STRESS$
			max = 1000000
		}
	}
}
eafp_effect_option_gain_balance = {	#선지 누를때-힘의균형 증감
	#효과
	change_variable = {
		name = eafp_var_je_sedo_politics_balance
		add = $BALANCE$
	}
	custom_description = {
		value = $BALANCE$
		text = eafp_balance_gain_from_event_option_effect_loc
	}
	clamp_variable = {
		name = eafp_var_je_sedo_politics_balance
		min = 0
		max = 500
	}
}
eafp_effect_option_gain_attitude = {	#선지 누를때-권력공유자 태도 증감-그냥 변화요인으로 바꿈
	#효과

	if = {
		limit = { $ATTITUDE$ >= 0 }
		ig:ig_landowners = {
			add_modifier = {
				name = eafp_modi_sedo_politics_happy
				multiplier = $ATTITUDE$
				days = normal_modifier_time
				is_decaying = yes
			}
		}
	}
	else = {
		ig:ig_landowners = {
			add_modifier = {
				name = eafp_modi_sedo_politics_angry
				multiplier = {
					value = $ATTITUDE$
					multiply = -1
				}
				days = normal_modifier_time
				is_decaying = yes
			}
		}
	}
}
#
eafp_effect_option_gain_civ = {	#이벤트 선택지 효과로 증감되는 개선진행도 연산 - 민
	if = {
		limit = { has_journal_entry = je_korean_land_problem }
		je:je_korean_land_problem ?= {
			add_progress = {
				name = eafp_progress_bar_land_problem_landexp_civ
				value = $CIV$
			}
		}
		custom_description = {
			value = $CIV$
			text = eafp_country_civ_gain_from_event_option_effect_loc
		}
	}
}
eafp_effect_option_gain_adm = {	#이벤트 선택지 효과로 증감되는 개선진행도 연산 - 관
	if = {
		limit = { has_journal_entry = je_korean_land_problem }
		je:je_korean_land_problem ?= {
			add_progress = {
				name = eafp_progress_bar_land_problem_landexp_adm
				value = $ADM$
			}
		}
		custom_description = {
			value = $ADM$
			text = eafp_country_adm_gain_from_event_option_effect_loc
		}
	}
}
eafp_effect_option_gain_mil = {	#이벤트 선택지 효과로 증감되는 개선진행도 연산 - 군
	if = {
		limit = { has_journal_entry = je_korean_land_problem }
		je:je_korean_land_problem ?= {
			add_progress = {
				name = eafp_progress_bar_land_problem_landexp_mil
				value = $MIL$
			}
		}
		custom_description = {
			value = $MIL$
			text = eafp_country_mil_gain_from_event_option_effect_loc
		}
	}
}

eafp_effect_option_gain_blossom = {	#선지 누를때-개화도 증감
	if = {
		limit = {
			has_journal_entry = je_korean_confu
		}
		je:je_korean_confu = {
			add_progress = { value = $BLOSSOM$ name = eafp_progress_bar_confu }
		}
		custom_description = {
			value = $BLOSSOM$
			text = eafp_blossom_gain_from_event_option_effect_loc
		}
	}
}

eafp_effect_regent_assign = {
	every_scope_character = {
		limit = {
			has_trait = kor_grand_empress_dowager
		}
		set_character_busy_and_immortal = no
		kill_character = {
			hidden = yes
		}
	}
	if = { # 명경대왕대비 김씨
		limit = { game_date <= 1857.9.21 }
		create_character = {
			template = eafp_kor_myeonggyeongbi_kim_character_template
			save_scope_as = regent
			on_created = {
				set_character_busy_and_immortal = yes
			}
		}
	}
	else_if = { # 효유대왕대비 조씨
		limit = { game_date <= 1890.5.23 }
		create_character = {
			template = eafp_kor_hyoyubi_jo_character_template
			save_scope_as = regent
			on_created = {
				set_character_busy_and_immortal = yes
			}
		}
	}
	else_if = { # 명헌대왕대비 홍씨
		limit = { game_date <= 1904.1.2 }
		create_character = {
			template = eafp_kor_myeongheonbi_hong_character_template
			save_scope_as = regent
			on_created = {
				set_character_busy_and_immortal = yes
			}
		}
	}
	else_if = { # 효자대왕대비 민씨
		limit = { game_date <= 1925.1.1 } # 임의
		create_character = {
			template = eafp_kor_hyojabi_min_character_template
			save_scope_as = regent
			on_created = {
				set_character_busy_and_immortal = yes
			}
		}
	}
	else = {
		# 이때까지 정치제도가 그대로 이어질거라 생각이 안듦 TODO
		create_character = {
			female = yes
			age = { 30 50 }
			save_scope_as = regent
			traits = {
				kor_grand_empress_dowager
			}
			on_created = {
				set_character_busy_and_immortal = yes
			}
		}
	}
	set_variable = {
		name = eafp_var_je_regent_character
		value = scope:regent
	}
	scope:regent = {
		post_notification = eafp_message_new_regent
	}
}
eafp_regent_lifespan_pulse = {
	if = { # 명경대왕대비 김씨
		limit = {
			var:eafp_var_je_regent_character ?= { has_template = eafp_kor_myeonggyeongbi_kim_character_template }
			game_date > 1857.9.21
		}
		var:eafp_var_je_regent_character = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		eafp_effect_regent_assign = yes
	}
	else_if = { # 효유대왕대비 조씨
		limit = {
			var:eafp_var_je_regent_character ?= { has_template = eafp_kor_hyoyubi_jo_character_template }
			game_date > 1890.5.23
		}
		var:eafp_var_je_regent_character = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		eafp_effect_regent_assign = yes
	}
	else_if = { # 명헌대왕대비 홍씨
		limit = {
			var:eafp_var_je_regent_character ?= { has_template = eafp_kor_myeongheonbi_hong_character_template }
			game_date > 1904.1.2
		}
		var:eafp_var_je_regent_character = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		eafp_effect_regent_assign = yes
	}
	else_if = { # 효자대왕대비 민씨
		limit = {
			var:eafp_var_je_regent_character ?= { has_template = eafp_kor_hyojabi_min_character_template }
			game_date > 1925.1.1
		}
		var:eafp_var_je_regent_character = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		eafp_effect_regent_assign = yes
	}
	else_if = {
		# 이때까지 정치제도가 그대로 이어질거라 생각이 안듦 TODO
		limit = {
			var:eafp_var_je_regent_character ?= {
				NOT = { has_template = eafp_kor_myeonggyeongbi_kim_character_template }
				NOT = { has_template = eafp_kor_hyoyubi_jo_character_template }
				NOT = { has_template = eafp_kor_myeongheonbi_hong_character_template }
				NOT = { has_template = eafp_kor_hyojabi_min_character_template }
				age >= 65
			}
		}
		random_list = {
			30 = { }
			1 = {
				var:eafp_var_je_regent_character = {
					set_character_busy_and_immortal = no
					kill_character = {
						hidden = yes
					}
				}
				eafp_effect_regent_assign = yes
			}
		}
	}
}

####

eafp_sedo_politics_lifespan_pulse = {
	##이하 역사 이벤트용 히든 이펙트
	if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_kim_yugun_character_template }
			game_date > 1839.10.1
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 조만영
			template = eafp_kor_jo_manyeong_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_jossi_good
				}
			}
		}
	}
	else_if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_jo_manyeong_character_template }
			game_date > 1851.7.1
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 김흥근
			template = eafp_kor_kim_heunggeun_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_kmsii_good
				}
			}
		}
	}
	else_if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_kim_heunggeun_character_template }
			game_date > 1852.5.5
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 김좌근. 김조순의 삼남.
			template = eafp_kor_kim_juagun_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_kmsii_good
				}
			}
		}
	}
	else_if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_kim_juagun_character_template }
			game_date > 1868.1.1
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 김병학
			template = eafp_kor_kim_byeonghak_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_kmsii_good
				}
			}
		}
	}
	else_if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_kim_byeonghak_character_template }
			game_date > 1875.1.1
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 김병기
			template = eafp_kor_kim_byeonggi_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_kmsii_good
				}
			}
		}
	}
	else_if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_kim_byeonggi_character_template }
			game_date > 1872.1.1
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 김병국
			template = eafp_kor_kim_byeongguk_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_kmsii_good
				}
			}
		}
	}
	else_if = {
		limit = {
			ig:ig_landowners.leader = { has_template = eafp_kor_kim_byeongguk_character_template }
			game_date > 1904.1.1
		}
		ig:ig_landowners.leader = {
			set_character_busy_and_immortal = no
			kill_character = {
				hidden = yes
			}
		}
		create_character = {
			# 김승규
			template = eafp_kor_kim_seunggyu_character_template
			on_created = {
				set_character_busy_and_immortal = yes
				add_modifier = {
					name = eafp_modi_kmsii_good
				}
			}
		}
	}
}
eafp_sedo_politics_authority_event_roll = {	#월 헌종 왕권강화책 굴림
	random_list = {
		160 = {	#아무일도 없었다.
			modifier = {
				if = {
					limit = {
						has_variable = eafp_check_evt_k301
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k303
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k305
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k307
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k309
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k311
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k313
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k315
					}
					add = -10
				}
				if = {
					limit = {
						has_variable = eafp_check_evt_k317
					}
					add = -10
				}
				if = {
					limit = {
						has_journal_entry = je_korean_regent # 수렴청정 중에는 하기 힘듦
					}
					add = 100
				}
			}
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k301
							has_variable = eafp_var_authority_event_cooltime
							NOT = { has_variable = eafp_check_chr_chusa_exiled }
							NOT = {
								any_character = {
									has_template = eafp_kor_gim_jeonghui_character_template
								}
							}
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k301
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.301 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k303
							has_variable = eafp_var_authority_event_cooltime
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k303
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.303 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k305
							has_variable = eafp_var_authority_event_cooltime
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k305
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.305 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k307
							has_variable = eafp_var_authority_event_cooltime
							NOT = { has_variable = eafp_check_evt_k306 }
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k307
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.307 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k309
							has_variable = eafp_var_authority_event_cooltime
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k309
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.309 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k311
							has_variable = eafp_var_authority_event_cooltime
							NOT = { has_variable = eafp_check_evt_k304 }
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k311
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.311 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k313
							has_variable = eafp_var_authority_event_cooltime
							NOT = { has_variable = eafp_check_evt_k302 }
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k313
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.313 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k315
							has_variable = eafp_var_authority_event_cooltime
							NOT = { has_variable = eafp_check_evt_k314 }
						}
					}
					add = -5
				}
			}
			set_variable = eafp_check_evt_k315
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.315 }
		}
		5 = {
			modifier = {
				if = {
					limit = {
						OR = {
							has_variable = eafp_check_evt_k317
							has_variable = eafp_var_authority_event_cooltime
							AND = {
								has_journal_entry = je_korean_kings_health
								je:je_korean_kings_health = {
									"scripted_bar_progress(eafp_progress_bar_kings_health)" < 400
								}
							}
						}
					}
					add = -5
				}
				if = {
					limit = {
						NOR = {
							has_variable = eafp_check_evt_k317
							has_variable = eafp_var_authority_event_cooltime
						}
						AND = {
							has_journal_entry = je_korean_kings_health
							je:je_korean_kings_health = {
								"scripted_bar_progress(eafp_progress_bar_kings_health)" >= 450
							}
						}
					}
					add = 45
				}
			}
			set_variable = eafp_check_evt_k317
			set_variable = {
				name = eafp_var_authority_event_cooltime
				months = 6
			}
			trigger_event = { id = eafp_kor_mainline.317 }
		}
	}
}
##
eafp_sedo_politics_corruption_roll = {	#주 권력공유자 사익추구 행동 굴림
	random_list = {
		1500 = {	#아무일도 없었다.
			modifier = {
				# 너무 높으면 잘 안함
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_balance >= 100
					}
					add = 1000
				}
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_balance >= 200
					}
					add = 500
				}
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_balance >= 300
					}
					add = 500
				}
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_balance >= 400
					}
					add = 500
				}
			}
		}
		#1단계
		40 = {	#소규모 자금착복
			trigger = {
				var:eafp_var_je_sedo_politics_balance < 200
				OR = {
					gold_reserves >= 0
					investment_pool >= eafp_val_embezzle_s_cost
				}
			}
			modifier = {
				#권력공유자의 사유재산이 낮다면
				if = {
					limit = {
						OR = {
							NOT = { has_variable = eafp_var_je_sedo_politics_account }
							var:eafp_var_je_sedo_politics_account <= eafp_val_embezzle_focus
						}
					}
					add = 20
				}
			}
			random_list = {
				1 = {
					trigger = {
						gold_reserves >= 0
					}
					add_treasury = eafp_val_embezzle_s_cost	#내가 낼 돈
					change_variable = {	#송금
						name = eafp_var_je_sedo_politics_account
						add = {
							value = eafp_val_embezzle_s_cost
							multiply = -1
						}
					}
					save_scope_value_as = {
						name = eafp_pocket_money_payment
						value = {
							value = eafp_val_embezzle_s_cost
							multiply = -1
						}
					}
					post_notification = eafp_message_sedo_politics_embezzle_s
				}
				1 = {
					trigger = {
						investment_pool >= eafp_val_embezzle_s_cost
					}
					add_investment_pool = eafp_val_embezzle_s_cost	#투자원천금에서 나가는 돈
					change_variable = {	#송금
						name = eafp_var_je_sedo_politics_account
						add = {
							value = eafp_val_embezzle_s_cost
							multiply = -1
						}
					}
					save_scope_value_as = {
						name = eafp_pocket_money_payment
						value = {
							value = eafp_val_embezzle_s_cost
							multiply = -1
						}
					}
					post_notification = eafp_message_sedo_politics_embezzle_investment_pool_s
				}
			}
		}
		20 = {	#정치력 키우기
			trigger = {
				ig:ig_landowners = {
					NOT = { has_modifier = eafp_modi_pp_up }
				}
			}
			modifier = {
				# 양반 정치력이 20% 밑이라면,
				if = {
					limit = {
						ig:ig_landowners = { is_powerful = no }
					}
					add = 15
				}
			}
			ig:ig_landowners = {
				add_modifier = {
					name = eafp_modi_pp_up
					months = 18
				}
				save_scope_as = eafp_message_target_ig
			}
			post_notification = eafp_message_sedo_politics_political_power
		}
		20 = {	#힘의균형 끌기
			trigger = {
				var:eafp_var_je_sedo_politics_account >= {
					value = gold_reserves_limit
					multiply = 0.05
				}
			}
			modifier = {
				#권력공유자의 돈이 충분하다면
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_account >= {
							value = gold_reserves_limit
							multiply = 0.15
						}
					}
					add = 50
				}
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_account >= {
							value = gold_reserves_limit
							multiply = 0.5
						}
					}
					add = 100
				}
				#권력공유자의 권세가 매우 낮다면
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_balance < 100
					}
					add = 20
				}
				#권력공유자의 권세가 낮다면
				if = {
					limit = {
						var:eafp_var_je_sedo_politics_balance < 200
					}
					add = 10
				}
			}
			change_variable = {	#지출
				name = eafp_var_je_sedo_politics_account
				add = {
					value = gold_reserves_limit
					multiply = -0.05
				}
			}
			eafp_effect_option_gain_balance = {
				BALANCE = 10
			}
			save_scope_value_as = {
				name = eafp_pocket_money_payment
				value = {
					value = gold_reserves_limit
					multiply = 0.05
				}
			}
			post_notification = eafp_message_sedo_politics_pulling_balance
		}
		#2단계
		15 = {	#지역수탈-민
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 100
				has_journal_entry = je_korean_land_problem
			}
			modifier = {
				#암행어사가 활발히 활동중일경우,
				if = {
					limit = {
						has_variable = eafp_var_royal_inspector
					}
					add = -7
				}
			}
			# 최종 착복금은 기본값인 eafp_val_land_exploit_cost 에 더하여, 지역개발도 레벨따라 (+0% ~ +100%) 까지 보정.
			change_variable = {	#입금
				name = eafp_var_je_sedo_politics_account
				add = {
					value = eafp_val_land_exploit_cost
					multiply = eafp_val_land_problem_civ
					divide = eafp_val_land_problem_threshold5
					add = eafp_val_land_exploit_cost
				}
			}
			eafp_effect_option_gain_civ = {
				CIV = -15
			}
			save_scope_value_as = {
				name = eafp_pocket_money_payment
				value = {
					value = eafp_val_land_exploit_cost
					multiply = eafp_val_land_problem_civ
					divide = eafp_val_land_problem_threshold5
					add = eafp_val_land_exploit_cost
				}
			}
			post_notification = eafp_message_sedo_politics_exploit_civ
		}
		15 = {	#지역수탈-관
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 100
				has_journal_entry = je_korean_land_problem
			}
			modifier = {
				#암행어사가 활발히 활동중일경우,
				if = {
					limit = {
						has_variable = eafp_var_royal_inspector
					}
					add = -7
				}
			}
			# 최종 착복금은 기본값인 eafp_val_land_exploit_cost 에 더하여, 지역개발도 레벨따라 (+0% ~ +100%) 까지 보정.
			change_variable = {	#입금
				name = eafp_var_je_sedo_politics_account
				add = {
					value = eafp_val_land_exploit_cost
					multiply = eafp_val_land_problem_adm
					divide = eafp_val_land_problem_threshold5
					add = eafp_val_land_exploit_cost
				}
			}
			eafp_effect_option_gain_adm = {
				ADM = -15
			}
			save_scope_value_as = {
				name = eafp_pocket_money_payment
				value = {
					value = eafp_val_land_exploit_cost
					multiply = eafp_val_land_problem_adm
					divide = eafp_val_land_problem_threshold5
					add = eafp_val_land_exploit_cost
				}
			}
			post_notification = eafp_message_sedo_politics_exploit_adm
		}
		15 = {	#지역수탈-군
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 100
				has_journal_entry = je_korean_land_problem
			}
			modifier = {
				#암행어사가 활발히 활동중일경우,
				if = {
					limit = {
						has_variable = eafp_var_royal_inspector
					}
					add = -7
				}
			}
			# 최종 착복금은 기본값인 eafp_val_land_exploit_cost 에 더하여, 지역개발도 레벨따라 (+0% ~ +100%) 까지 보정.
			change_variable = {	#입금
				name = eafp_var_je_sedo_politics_account
				add = {
					value = eafp_val_land_exploit_cost
					multiply = eafp_val_land_problem_mil
					divide = eafp_val_land_problem_threshold5
					add = eafp_val_land_exploit_cost
				}
			}
			eafp_effect_option_gain_mil = {
				MIL = -15
			}
			save_scope_value_as = {
				name = eafp_pocket_money_payment
				value = {
					value = eafp_val_land_exploit_cost
					multiply = eafp_val_land_problem_mil
					divide = eafp_val_land_problem_threshold5
					add = eafp_val_land_exploit_cost
				}
			}
			post_notification = eafp_message_sedo_politics_exploit_mil
		}
		20 = {	#정통성 하락
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 100
				NOT = { has_modifier = eafp_modi_attack_legitimacy }
			}
			add_modifier = {
				name = eafp_modi_attack_legitimacy
				months = 12
			}
			post_notification = eafp_message_sedo_politics_attack_legitimacy
		}
		#3단계
		40 = {	#중규모 자금착복
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 200
				var:eafp_var_je_sedo_politics_balance < 400
				OR = {
					gold_reserves >= 0
					investment_pool >= eafp_val_embezzle_m_cost
				}
			}
			modifier = {
				#권력공유자의 사유재산이 낮다면
				if = {
					limit = {
						OR = {
							NOT = { has_variable = eafp_var_je_sedo_politics_account }
							var:eafp_var_je_sedo_politics_account <= eafp_val_embezzle_focus
						}
					}
					add = 20
				}
			}
			random_list = {
				1 = {
					trigger = {
						gold_reserves >= 0
					}
					add_treasury = eafp_val_embezzle_m_cost	#내가 낼 돈
					change_variable = {	#송금
						name = eafp_var_je_sedo_politics_account
						add = {
							value = eafp_val_embezzle_m_cost
							multiply = -1
						}
					}
					save_scope_value_as = {
						name = eafp_pocket_money_payment
						value = {
							value = eafp_val_embezzle_m_cost
							multiply = -1
						}
					}
					post_notification = eafp_message_sedo_politics_embezzle_m
				}
				1 = {
					trigger = {
						investment_pool >= eafp_val_embezzle_m_cost
					}
					add_investment_pool = eafp_val_embezzle_m_cost	#투자원천금에서 나가는 돈
					change_variable = {	#송금
						name = eafp_var_je_sedo_politics_account
						add = {
							value = eafp_val_embezzle_m_cost
							multiply = -1
						}
					}
					save_scope_value_as = {
						name = eafp_pocket_money_payment
						value = {
							value = eafp_val_embezzle_m_cost
							multiply = -1
						}
					}
					post_notification = eafp_message_sedo_politics_embezzle_investment_pool_m
				}
			}
		}
		#4단계
		30 = {	#지휘관 측근임명
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 300
				any_scope_general = {
					NOT = { has_modifier = eafp_modi_sedo_friendly }
					NOT = { has_modifier = eafp_modi_kmsii_good }
					NOT = { has_modifier = eafp_modi_jossi_good }
					is_ruler = no
				}
			}
			modifier = {
				#이미 두놈이상 측근이라면?
				if = {
					limit = {
						any_scope_general = {
							has_modifier = eafp_modi_sedo_friendly
							count >= 2
						}
					}
					add = -15
				}
			}
			ig:ig_landowners = {	#권력공유자의 IG를 따와서...
				save_scope_as = eafp_appoint_general_target_ig
			}
			random_military_formation = {
				limit = {
					any_scope_general = {
						NOT = { has_modifier = eafp_modi_sedo_friendly }
						NOT = { has_modifier = eafp_modi_jossi_good }
						NOT = { has_modifier = eafp_modi_kmsii_good }
						is_ruler = no
					}
				}
				save_scope_as = eafp_formation_sedo_target	#목표 포메이션으로 지정.
				random_scope_general = {
					limit = {
						NOT = { has_modifier = eafp_modi_sedo_friendly }
						NOT = { has_modifier = eafp_modi_jossi_good }
						NOT = { has_modifier = eafp_modi_kmsii_good }
						is_ruler = no
					}
					save_scope_as = eafp_char_sedo_unfriendly_general	#해임자 지정.
					#kill_character = yes
				}
			}
			if = {	#부대가 육군이면
				limit = {
					scope:eafp_formation_sedo_target = {
						is_army = yes
					}
				}
				if = {	#김씨 위세면,
					limit = {
						ig:ig_landowners.leader = {
							has_modifier = eafp_modi_kmsii_good
						}
					}
					create_character = {
						## 랜덤인물
						is_general = yes
						#first_name = "아무거나"
						last_name = "Kim"	#김씨
						historical = no
						##birth_date = 1999.11.23
						commander_rank = commander_rank_1
						interest_group = scope:eafp_appoint_general_target_ig
						on_created = {
							add_modifier = {
								name = eafp_modi_sedo_friendly
							}
							add_random_trait = skill
							add_experience = 1.0
						}
						save_scope_as = eafp_char_sedo_friendly_general
					}
				}
				else_if = {	#조씨 위세면,
					limit = {
						ig:ig_landowners.leader = {
							has_modifier = eafp_modi_jossi_good
						}
					}
					create_character = {
						## 랜덤인물
						is_general = yes
						#first_name = "아무거나"
						last_name = "Jo"	#조씨
						historical = no
						##birth_date = 1999.11.23
						commander_rank = commander_rank_1
						interest_group = scope:eafp_appoint_general_target_ig
						on_created = {
							add_modifier = {
								name = eafp_modi_sedo_friendly
							}
							add_random_trait = skill
							add_experience = 1.0
						}
						save_scope_as = eafp_char_sedo_friendly_general
					}
				}
				else = {	#둘다 아니면,
					create_character = {
						## 랜덤인물
						is_general = yes
						#first_name = "아무거나"
						#last_name = "Yi"	#이씨?
						historical = no
						##birth_date = 1999.11.23
						commander_rank = commander_rank_1
						interest_group = scope:eafp_appoint_general_target_ig
						on_created = {
							add_modifier = {
								name = eafp_modi_sedo_friendly
							}
							add_random_trait = skill
							add_experience = 1.0
						}
						save_scope_as = eafp_char_sedo_friendly_general
					}
				}
			}
			else = {	#부대가 해군이면
				if = {	#김씨 위세면,
					limit = {
						ig:ig_landowners.leader = {
							has_modifier = eafp_modi_kmsii_good
						}
					}
					create_character = {
						## 랜덤인물
						is_admiral = yes
						#first_name = "아무거나"
						last_name = "Kim"	#김씨
						historical = no
						##birth_date = 1999.11.23
						commander_rank = commander_rank_1
						interest_group = scope:eafp_appoint_general_target_ig
						on_created = {
							add_modifier = {
								name = eafp_modi_sedo_friendly
							}
							add_random_trait = skill
							add_experience = 1.0
						}
						save_scope_as = eafp_char_sedo_friendly_general
					}
				}
				else_if = {	#조씨 위세면,
					limit = {
						ig:ig_landowners.leader = {
							has_modifier = eafp_modi_jossi_good
						}
					}
					create_character = {
						## 랜덤인물
						is_admiral = yes
						#first_name = "아무거나"
						last_name = "Jo"	#조씨
						historical = no
						##birth_date = 1999.11.23
						commander_rank = commander_rank_1
						interest_group = scope:eafp_appoint_general_target_ig
						on_created = {
							add_modifier = {
								name = eafp_modi_sedo_friendly
							}
							add_random_trait = skill
							add_experience = 1.0
						}
						save_scope_as = eafp_char_sedo_friendly_general
					}
				}
				else = {	#둘다 아니면,
					create_character = {
						## 랜덤인물
						is_admiral = yes
						#first_name = "아무거나"
						#last_name = "Yi"	#이씨?
						historical = no
						##birth_date = 1999.11.23
						commander_rank = commander_rank_1
						interest_group = scope:eafp_appoint_general_target_ig
						on_created = {
							add_modifier = {
								name = eafp_modi_sedo_friendly
							}
							add_random_trait = skill
							add_experience = 1.0
						}
						save_scope_as = eafp_char_sedo_friendly_general
					}
				}
			}
			if = {
				limit = {
					exists = scope:eafp_char_sedo_friendly_general
				}
				scope:eafp_char_sedo_friendly_general = {	#목표 포메이션으로 발령.
					transfer_to_formation = scope:eafp_formation_sedo_target
					#장군 등급 따오기
					if = {
						limit = {
							scope:eafp_char_sedo_unfriendly_general = {
								commander_rank >= 5
							}
						}
						set_commander_rank = 5
					}
					else_if = {
						limit = {
							scope:eafp_char_sedo_unfriendly_general = {
								commander_rank = 4
							}
						}
						set_commander_rank = 4
					}
					else_if = {
						limit = {
							scope:eafp_char_sedo_unfriendly_general = {
								commander_rank = 3
							}
						}
						set_commander_rank = 3
					}
					else_if = {
						limit = {
							scope:eafp_char_sedo_unfriendly_general = {
								commander_rank = 2
							}
						}
						set_commander_rank = 2
					}
					else = {
						set_commander_rank = 1
					}
				}
			}
			scope:eafp_char_sedo_unfriendly_general = {
				kill_character = {
					hidden = yes
				}
			}
			post_notification = eafp_message_sedo_politics_appoint_general
		}
		30 = {	#행정력 하락
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 300
			}
			modifier = {
				#이미 모디파이어가 있다면?
				if = {
					limit = {
						has_modifier = eafp_modi_appoint_bureaucrat
					}
					add = -10
				}
			}
			add_modifier = {
				name = eafp_modi_appoint_bureaucrat
				months = 12
			}
			post_notification = eafp_message_sedo_politics_appoint_bureaucrat
		}
		#5단계
		20 = {	#대규모 자금착복
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 400
				OR = {
					gold_reserves >= 0
					investment_pool >= eafp_val_embezzle_l_cost
				}
			}
			modifier = {
				#권력공유자의 사유재산이 낮다면
				if = {
					limit = {
						OR = {
							NOT = { has_variable = eafp_var_je_sedo_politics_account }
							var:eafp_var_je_sedo_politics_account <= eafp_val_embezzle_focus
						}
					}
					add = 10
				}
			}
			random_list = {
				1 = {
					trigger = {
						gold_reserves >= 0
					}
					add_treasury = eafp_val_embezzle_l_cost	#내가 낼 돈
					change_variable = {	#송금
						name = eafp_var_je_sedo_politics_account
						add = {
							value = eafp_val_embezzle_l_cost
							multiply = -1
						}
					}
					save_scope_value_as = {
						name = eafp_pocket_money_payment
						value = {
							value = eafp_val_embezzle_l_cost
							multiply = -1
						}
					}
					post_notification = eafp_message_sedo_politics_embezzle_l
				}
				1 = {
					trigger = {
						investment_pool >= eafp_val_embezzle_l_cost
					}
					add_investment_pool = eafp_val_embezzle_l_cost	#투자원천금에서 나가는 돈
					change_variable = {	#송금
						name = eafp_var_je_sedo_politics_account
						add = {
							value = eafp_val_embezzle_l_cost
							multiply = -1
						}
					}
					save_scope_value_as = {
						name = eafp_pocket_money_payment
						value = {
							value = eafp_val_embezzle_l_cost
							multiply = -1
						}
					}
					post_notification = eafp_message_sedo_politics_embezzle_investment_pool_l
				}
			}
		}
		25 = {	#날치기 제정 TODO
			trigger = {
				var:eafp_var_je_sedo_politics_balance >= 400
				NOT = { has_variable = eafp_var_snatch_law_cooltime }
				always = no
			}
			#이펙트 = yes
			set_variable = {
				name = eafp_var_snatch_law_cooltime
				months = 48
			}
			post_notification = eafp_message_sedo_politics_snatch_law
		}
	}
}
##
eafp_sedo_politics_corruption_passive = {
	#일단 매달 녹봉지급.
	change_variable = {	#송금
		name = eafp_var_je_sedo_politics_account
		add = eafp_val_regent_monthly_allowance
	}
	save_scope_value_as = {
		name = eafp_pocket_money_payment
		value = eafp_val_regent_monthly_allowance
	}
	post_notification = eafp_message_sedo_politics_monthly_allowance
	add_treasury = {	#지출할 돈
		value = eafp_val_regent_monthly_allowance
		multiply = -1
	}
	#이하 패시브 효과 체크.
	if = {
		limit = {
			ig:ig_landowners = { is_in_government = no }
		}
		eafp_effect_option_gain_stress = {
			STRESS = 1
		}
		post_notification = eafp_message_sedo_politics_non_exist
	}
	if = {
		limit = {
			ig:ig_landowners = {
				ig_approval <= angry
			}
			var:eafp_var_je_sedo_politics_balance >= 300
		}
		if = {
			limit = {
				NOT = { has_modifier = eafp_modi_sedo_they_are_angry }
			}
			post_notification = eafp_message_sedo_politics_they_are_angry
			add_modifier = eafp_modi_sedo_they_are_angry
		}
	}
	else = {
		if = {
			limit = { has_modifier = eafp_modi_sedo_they_are_angry }
			remove_modifier = eafp_modi_sedo_they_are_angry
		}
	}
	if = {
		limit = { var:eafp_var_je_sedo_politics_balance >= 400 }
		if = {
			limit = { NOT = { has_modifier = eafp_modi_sedo_politics_power_balance_5_country } }
			add_modifier = eafp_modi_sedo_politics_power_balance_5_country
		}
		ig:ig_landowners.leader = {
			if = {
				limit = { NOT = { has_modifier = eafp_modi_sedo_politics_power_balance_5_character } }
				add_modifier = eafp_modi_sedo_politics_power_balance_5_character
			}
		}
	}
	if = {
		limit = { var:eafp_var_je_sedo_politics_balance < 400 }
		if = {
			limit = { has_modifier = eafp_modi_sedo_politics_power_balance_5_country }
			remove_modifier = eafp_modi_sedo_politics_power_balance_5_country
		}
		ig:ig_landowners.leader = {
			if = {
				limit = { has_modifier = eafp_modi_sedo_politics_power_balance_5_character }
				remove_modifier = eafp_modi_sedo_politics_power_balance_5_character
			}
		}
	}
}
####
eafp_effect_missionary_spawn = {	#선교사 스폰
	random_list = {
		17 = {
			modifier = {
				if = {	#역사적 인물이 나올 때가 되면...
					limit = {
						game_date >= 1837.3.1
						NOT = { has_global_variable = eafp_check_chr_imbert }
					}
					add = -15
				}
				if = {	#역사적 인물이 나올 때가 되면...
					limit = {
						game_date >= 1845.3.1
						NOT = { has_global_variable = eafp_check_chr_daegeon }
					}
					add = -15
				}
				if = {	#역사적 인물이 나올 때가 되면...
					limit = {
						game_date >= 1850.3.1
						NOT = { has_global_variable = eafp_check_chr_yangup }
					}
					add = -15
				}
				if = {	#이미 선교사가 있으면...
					limit = {
						eafp_val_total_missionary >= 1
					}
					add = 4
				}
				if = {	#선교사가 많으면...
					limit = {
						eafp_val_total_missionary >= 2
					}
					add = 6
				}
				if = {	#선교사가 너무 많으면...
					limit = {
						eafp_val_total_missionary >= 3
					}
					add = 8
				}
				if = {	#39년까지는...
					limit = {
						year <= 1839
					}
					add = 5
				}
				if = {	#국가등급
					limit = {
						country_rank >= rank_value:major_power
					}
					add = 5
				}
			}
			#없음 콘)
		}
		#역사적
		100 = {	#앵베르
			modifier = {
				if = {	#중복방지~
					limit = {
						OR = {
							NOT = { game_date >= 1837.3.1 }
							has_global_variable = eafp_check_chr_imbert
						}
					}
					add = -100
				}
			}
			set_global_variable = eafp_check_chr_imbert
			create_character = {
				# 로랑 앵베르. 37년 5월 14일 조선에 밀입국.
				template = eafp_kor_laurent_joseph_marius_imbert_character_template
			}
		}
		100 = {	#김대건
			modifier = {
				if = {	#중복방지~
					limit = {
						OR = {
							NOT = { game_date >= 1845.3.1 }
							has_global_variable = eafp_check_chr_daegeon
						}
					}
					add = -100
				}
			}
			set_global_variable = eafp_check_chr_daegeon
			create_character = {
				# 김대건 안드레아. 45년 조선에 귀국.
				template = eafp_kor_daegeon_kim_character_template
			}
		}
		100 = {	#최양업
			modifier = {
				if = {	#중복방지~
					limit = {
						OR = {
							NOT = { game_date >= 1850.3.1 }
							has_global_variable = eafp_check_chr_yangup
						}
					}
					add = -100
				}
			}
			set_global_variable = eafp_check_chr_yangup
			create_character = {
				# 최양업 토마스. 아마도 50년 조선에 귀국.
				template = eafp_kor_yangup_choi_character_template
			}
		}
		#랜덤스폰
		1 = {
			modifier = {
				if = {	#국가등급
					limit = {
						OR = {
							country_rank > rank_value:major_power	#열강이거나,
							has_law = law_type:law_isolationism	#고립주의면?
							eafp_val_total_missionary >= 5	#혹은 선교사가 그냥 쥰내 많으면...
						}
					}
					add = -1
				}
			}
			random_list = {
				2 = {	#프랑스인
					create_character = {
						# 랜덤인물
						culture = cu:french
						religion = rel:catholic
						interest_group = ig_rural_folk
						ideology = ideology_eafp_missionary
						is_agitator = yes
						traits = {
							pious
						}
					}
				}
				1 = {	#조선인 - 김대건 등장 이후 활성화
					modifier = {
						if = {	#김대건 이후부터
							limit = {
								NOT = { has_global_variable = eafp_check_chr_daegeon }
							}
							add = -1
						}
					}
					create_character = {
						# 랜덤인물
						culture = cu:korean
						religion = rel:catholic
						#interest_group = ig_rural_folk
						ideology = ideology_eafp_missionary
						is_agitator = yes
						traits = {
							pious
						}
					}
				}
			}
		}
	}
}

eafp_effect_catholic_spread = {	#선교사 있을시 선교사마다 매월 포교
	every_scope_character = {
		limit = {
			has_ideology = ideology:ideology_eafp_missionary
		}
		owner = {
			every_scope_state = {
				every_scope_pop = {
					limit = {
						strata = upper
						NOT = { is_pop_type = clergymen }
					}
					change_pop_religion = {
						target = rel:catholic
						value = 0.00003
					}
				}
				every_scope_pop = {
					limit = {
						strata != upper
						NOT = { is_pop_type = clergymen }
					}
					change_pop_religion = {
						target = rel:catholic
						value = 0.00007
					}
				}
			}
		}
	}
}
eafp_effect_cal_catholic_modi_mult = {
	#국가 천주교 신자 비율에 따른 모디파이어 계수 산정 식. 기본형 >> output = 1-{1/(50x+1)}, x = religion_percent_country .
	if = {
		limit = { has_modifier = eafp_modi_catholic_plague }
		remove_modifier = eafp_modi_catholic_plague
	}

	set_local_variable = {
		name  = total_religion
		value = 0
	}
	set_local_variable = {
		name  = total_pops
		value = 0
	}
	every_scope_pop = {
		change_local_variable = {
			name = total_pops
			add  = total_size
		}
		if = {
			limit = {
				OR = {
					religion = rel:catholic
					religion = rel:protestant
				}
			}
			change_local_variable = {
				name = total_religion
				add  = total_size
			}
		}
	}
	add_modifier = {
		name = eafp_modi_catholic_plague
		multiplier = {
			value = 1
			subtract = {
				value = 1
				divide = {
					value = local_var:total_religion
					divide = local_var:total_pops
					multiply = 50
					add = 1
				}
			}
		}
	}
	remove_local_variable = total_religion
	remove_local_variable = total_pops
}

eafp_effect_catholic_purge = {	#가톨릭 퍼지
	set_variable = {	#쿨타임 4년
		name = eafp_var_button_educating_cooltime
		months = 48
	}
	custom_tooltip = {
		text = eafp_catholic_purge_tt1
		every_scope_state = {
			limit = {
				is_incorporated = yes
			}
			kill_population_percent_in_state = {
				percent = 0.10
				religion = rel:catholic
			}
		}
		every_scope_state = {
			every_scope_pop = {
				limit = {
					has_pop_religion = catholic
				}
				change_pop_religion = {
					target = rel:confucian
					value = 0.10
				}
			}
		}
	}
	every_scope_character = {
		limit = {
			has_ideology = ideology:ideology_eafp_missionary
		}
		every_country = {
			limit = {
				PREV.culture = {
					is_primary_culture_of = PREV
				}
			}
			change_relations = {
				country = ROOT
				value = -20
			}
			create_diplomatic_catalyst = {  
				type = catalyst_event_negative
				target = ROOT
			}
		}
		hidden_effect = { set_character_busy_and_immortal = no }
		kill_character = yes
	}
	custom_tooltip = {
		text = eafp_catholic_purge_tt2
		every_country = {
			limit = {
				OR = {
					country_has_state_religion = rel:catholic
					country_has_state_religion = rel:protestant
				}
			}
			change_relations = {
				country = ROOT
				value = -10
			}
		}
	}
	show_as_tooltip = {
		random_country = {
			limit = {
				OR = {
					country_has_state_religion = rel:catholic
					country_has_state_religion = rel:protestant
				}
			}
			change_relations = {
				country = ROOT
				value = -10
			}
		}
	}
	if = {
		limit = { any_political_movement = { is_political_movement_type = eafp_movement_rel_catholic } }
		every_political_movement = {
			limit = { is_political_movement_type = eafp_movement_rel_catholic }
			add_modifier = {
				name = large_scale_christian_persecution_modifier
				days = normal_modifier_time
			}
		}
	}
}