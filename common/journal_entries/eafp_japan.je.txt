# ID명, 변수명은 기본적으로 일본어 음차합니다.
# weight = 12000 최중요저널 10000 중요저널 8000 일반 5000 별 의미없음

japan_tutorial_je = {#튜토리얼 저널
    icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

    group = je_group_tutorial

    is_shown_when_inactive = { #튜토리얼이 스킵 되면 튜토리얼 저널을 감춥니다.
        NOT = { has_variable = japan_tutorial_skip_var }
        c:JAP = THIS
    }

    possible = {
        c:JAP = THIS
    }

    immediate = {
        set_variable = { #튜토리얼 기간 변수를 설정합니다.
            name = japan_tutorial_var
            value = 0
        }
        
        s:STATE_KYUSHU.region_state:JAP = {
            set_variable = { 
                name = bakuhan_taisei_kyushu_var #큐슈 다이묘 충성도(높을수록 불충) 변수
                value = 50
            }
        }
        s:STATE_TOHOKU.region_state:JAP = {
            set_variable = { 
                name = bakuhan_taisei_tohoku_var #도호쿠 다이묘 충성도 변수
                value = 10
            }
        }
        s:STATE_SHIKOKU.region_state:JAP = {
            set_variable = { 
                name = bakuhan_taisei_shikoku_var #시코쿠 다이묘 충성도 변수
                value = 40
            }
        }
         s:STATE_CHUGOKU.region_state:JAP = {
            set_variable = { 
                name = bakuhan_taisei_chugoku_var #주고쿠 다이묘 충성도 변수
                value = 60
            }
        }
        s:STATE_CHUBU.region_state:JAP = {
            set_variable = { 
                name = bakuhan_taisei_chubu_var #주부 다이묘 충성도 변수
                value = 20
            }
        }
        s:STATE_KANSAI.region_state:JAP = {
            set_variable = { 
                name = bakuhan_taisei_kansai_var #간사이 다이묘 충성도 변수
                value = 30
            }
        }
        trigger_event = {
            id = eafp_japan.4000
            days = 50
        }
        trigger_event = {
            id = eafp_japan.3000
            days = 2
        }
    }

    complete = { 
        scope:journal_entry = {
			is_goal_complete = yes
		}
    }

    on_complete = { set_variable = japan_tutorial_skip_var }

    scripted_button = japan_tutorial_button

     on_weekly_pulse = {
        effect = {
            change_variable = {
                name = japan_tutorial_var
                add = 5
            }
        }
    }

    current_value = {
		value = root.var:japan_tutorial_var
	}	

	goal_add_value = { # 6개월간 튜토리얼 저널을 유지합니다.
		value = 30
	}

    progressbar = yes

    weight = 12000

    should_be_pinned_by_default = yes
}


japan_sonnoha_je = {
    icon = "gfx\interface\icons\ig_icons\armed_forces.dds"

    group = je_group_historical_content

     scripted_button = japan_sonnoha_decisions_button

    immediate = {
        set_variable = {
            name = sonnoha_var_first
        }
        set_variable = {
            name = daimyo_desc_var
        }
        set_variable = {
            name = sonnoha_var #존황파 변수
            value = 0
        }
        trigger_event = {
            id = eafp_japan.2000
            days = 60
        } 
        han_modifier_kyushu = yes
		han_modifier_tohoku = yes
		han_modifier_shikoku = yes
		han_modifier_chugoku = yes
		han_modifier_chubu = yes
		han_modifier_kansai = yes
    }
    progress_desc = {
		first_valid = {
			triggered_desc = { 
				desc = daimyo_desc
				trigger = {
					has_variable = daimyo_desc_var
				}
			}
            triggered_desc = { 
				desc = no_daimyo_desc
				trigger = {
					NOT = { has_variable = daimyo_desc_var }
				}
			}
        }
    }
    status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = status_sonnoha_start
				trigger = {
					var:sonnoha_var <= 35
				}
			}
            triggered_desc = { 
				desc = status_sonnoha_low
				trigger = {
					var:sonnoha_var > 35
                    var:sonnoha_var <= 70
				}
			}
            triggered_desc = { 
				desc = status_sonnoha_medium
				trigger = {
					var:sonnoha_var > 70
                    var:sonnoha_var <= 105
				}
			}
            triggered_desc = { 
				desc = status_sonnoha_high
				trigger = {
					var:sonnoha_var > 105
                    var:sonnoha_var <= 130
				}
			}
            triggered_desc = { 
				desc = status_sonnoha_very_high
				trigger = {
					var:sonnoha_var > 130
                    var:sonnoha_var <= 150
				}
			}
            triggered_desc = { 
				desc = status_sonnoha_senso
				trigger = {
					var:sonnoha_var > 150
				}
			}
        }
    }

    complete = { 
        scope:journal_entry = {
			is_goal_complete = yes
		}
        game_date >= 1846.01.01
    }

    on_complete = { 
        custom_tooltip = {
            text = boshin_war_je_add_tt
                add_journal_entry = {
                type = japan_boshin_war_je
            }
        }
        
    }

    fail = {
        game_date >= 1846.01.01
        custom_tooltip = {
            text = japan_sonnoha_je_fail_tt
            has_variable = bakufu_kaikaku_complete_var
        }
    }

    on_fail = {
        trigger_event = {
            id = eafp_japan.666 #임시
        }
    }
    current_value = {
		value = root.var:sonnoha_var
	}	

    goal_add_value = {
		add = 200
	}

    on_monthly_pulse = {
		effect = {
			jono_total = yes
		}
	}


    progressbar = yes

    weight = 12000

    should_be_pinned_by_default = yes
}


japan_bakufu_kaikaku_je = {
     icon = "gfx\interface\icons\ig_icons\armed_forces.dds"

    group = je_group_historical_content

    immediate = {
        set_variable = { 
            name = bakufu_kaikaku_var #막부개혁 변수
            value = 0
        }
        set_variable = { 
            name = hitotsubashiha_var #개혁파 변수
            value = 5
        }
        set_variable = { 
            name = nankiha_var #보수파
            value = 80
        }

    }

    status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = status_bakufu_kaikaku_start
				trigger = {
					var:bakufu_kaikaku_var <= 20
				}
			}
            triggered_desc = { 
				desc = status_bakufu_kaikaku_low
				trigger = {
					var:bakufu_kaikaku_var > 20
                    var:bakufu_kaikaku_var <= 40
				}
			}
            triggered_desc = { 
				desc = status_bakufu_kaikaku_medium
				trigger = {
					var:bakufu_kaikaku_var > 40
                    var:bakufu_kaikaku_var <= 70
				}
			}
            triggered_desc = { 
				desc = status_bakufu_kaikaku_high
				trigger = {
					var:bakufu_kaikaku_var > 70
                    var:bakufu_kaikaku_var <= 90
				}
			}
            triggered_desc = { 
				desc = status_bakufu_kaikaku_very_high
				trigger = {
					var:bakufu_kaikaku_var > 90
				}
			}
        }
    }

    complete = { 
        OR = {
            custom_tooltip = {
                text = bakufu_kaikaku_je_complete_1_tt
                has_variable = no_boshin_war_var
            }
            custom_tooltip = {
                text = bakufu_kaikaku_je_complete_2_tt
                has_variable = boshin_war_bakufu_win_var
            }
        }
        game_date >= 1854.02.13
    }

    on_complete = { 
        custom_tooltip = {
            text = bakufu_kaikaku_je_on_complete_tt
             set_variable = bakufu_kaikaku_complete_var
        }
    }

    weight = 12000

    should_be_pinned_by_default = yes
}

japan_kaikou_je = {
    icon = "gfx\interface\icons\ig_icons\armed_forces.dds"

    group = je_group_historical_content

    immediate = {
        set_variable = {
            name = kaikou_var #개항 변수
            value = 0
        }
    }

    complete = { 
        scope:journal_entry = {
			is_goal_complete = yes
		}
        game_date >= 1850.01.01
        custom_tooltip = {
            text = kaikou_complete_tt
            OR = {
                has_variable = bakufu_kaikaku_complete_var
                has_variable = boshin_war_end_var
            }
        }
    }

    on_complete = { 
        if = {
            limit = {
                has_variable = bakufu_kaikaku_complete_var
            }
            add_journal_entry = {
                type = japan_tokugawa_isin_je
            }
        }
        else = {
            add_journal_entry = {
                type = japan_meiji_isin_je
            }
        }
    }

    goal_add_value = {
		add = 150
	}
    
    current_value = {
		value = root.var:kaikou_var
	}	

    progressbar = yes

    weight = 10000

    should_be_pinned_by_default = yes
}

japan_han_detail = {
    group = je_group_historical_content

    visible = { has_variable = han_detail_var }

    immediate = {
        set_variable = han_detail_already_set_var
    }
    weight = 8000
}


japan_hokkaido_je = {
    icon = "gfx\interface\icons\ig_icons\armed_forces.dds"

    group = je_group_historical_content

    scripted_button = japan_hokkaido_button

    immediate = {
    }

    complete = {
        s:STATE_HOKKAIDO.region_state:JAP = {
            state_population >= 200000
        }
    }

    on_complete = {
        trigger_event = {
            id = eafp_japan.1000
        }
    }

    timeout = 7000

    weight = 8000

}


japan_boshin_war_je = {
    icon = "gfx\interface\icons\ig_icons\armed_forces.dds"

    group = je_group_historical_content


    immediate = {
        set_variable = {
            name = boshin_war_var #보신전쟁 변수
            value = 0
        }
    }



    weight = 12000

    should_be_pinned_by_default = yes

}

japan_tokugawa_isin_je = {

}

japan_meiji_isin_je = {

}