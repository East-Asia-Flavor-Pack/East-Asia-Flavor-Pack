hitotsubashiha_vs_nankiha_start_effect = {
	save_scope_value_as = {
		name = sum
		value = {
			value = var:hitotsubashiha_influence_var
			add = var:nankiha_influence_var
			divide = 2
		}
	}
	change_variable = {
		name = hitotsubashiha_influence_var
		add = scope:sum
	}
	change_variable = {
		name = nankiha_influence_var
		add = scope:sum
	}
	clear_saved_scope = sum
	set_variable = hitotsubashiha_vs_nankiha_start
	bakufu_kaikaku_progress_bar_calc = yes
	every_scope_character = {
		if = {
			limit = { has_ideology = ideology:ideology_kaikakuha }
			random_list = {
				50 = {
					set_ideology = ideology:ideology_hitotsubashiha
				}
				50 = {
					set_ideology = ideology:ideology_moderate
				}
			}
		}
		if = {
			limit = { has_ideology = ideology:ideology_hoshuha }
			random_list = {
				50 = {
					set_ideology = ideology:ideology_nankiha
				}
				50 = {
					set_ideology = ideology:ideology_moderate
				}
			}
		}
	}
}

create_bakufu_politician_character = {
	switch = {
		trigger = $POSITION$
		flag:roju = {
			create_character = {
				age = { 40 60 }
				ideology = $IDEOLOGY$
				religion = rel:confucian
				on_created = {
					set_character_busy_and_immortal = yes
					set_variable = {
						name = eafp_bakuhantaisei_politician_influence
						value = 75
					}
					set_variable = {
						name = eafp_bakuhantaisei_politician_influence_max
						value = 150
					}
					assign_CHARACTER_LIFE_EXPECTANCY_STDDEV_value = yes
					add_modifier = {
						name = modifier_bakufu_recently_appointed
						months = { 36 48 }
					}
					random_list = {
						1 = { }
						1 = {
							add_random_trait = personality
						}
					}
					c:JAP = {
						add_to_variable_list = { name = roju_varlist target = PREV }
					}
				}
			}
		}
		flag:rojushuza = {
			create_character = {
				age = { 40 60 }
				ideology = $IDEOLOGY$
				religion = rel:confucian
				on_created = {
					set_character_busy_and_immortal = yes
					set_variable = {
						name = eafp_bakuhantaisei_politician_influence
						value = 100
					}
					set_variable = {
						name = eafp_bakuhantaisei_politician_influence_max
						value = 200
					}
					assign_CHARACTER_LIFE_EXPECTANCY_STDDEV_value = yes
					add_modifier = {
						name = modifier_bakufu_recently_appointed
						months = { 36 48 }
					}
					random_list = {
						1 = { }
						1 = {
							add_random_trait = personality
						}
					}
					c:JAP = {
						set_variable = { name = rojushuza_var value = PREV }
					}
				}
			}
		}
		flag:tairo = {
			random_list = {
				2 = {
					create_character = {
						age = { 40 60 }
						ideology = $IDEOLOGY$
						religion = rel:confucian
						last_name = Ii
						on_created = {
							set_character_busy_and_immortal = yes
							set_variable = {
								name = eafp_bakuhantaisei_politician_influence
								value = 125
							}
							set_variable = {
								name = eafp_bakuhantaisei_politician_influence_max
								value = 250
							}
							assign_CHARACTER_LIFE_EXPECTANCY_STDDEV_value = yes
							add_modifier = {
								name = modifier_bakufu_recently_appointed
								months = { 36 48 }
							}
							random_list = {
								1 = { }
								1 = {
									add_random_trait = personality
								}
							}
							c:JAP = {
								set_variable = { name = tairo_var value = PREV }
							}
						}
					}
				}
				1 = {
					create_character = {
						age = { 40 60 }
						ideology = $IDEOLOGY$
						religion = rel:confucian
						last_name = Sakai
						on_created = {
							set_character_busy_and_immortal = yes
							set_variable = {
								name = eafp_bakuhantaisei_politician_influence
								value = 250
							}
							set_variable = {
								name = eafp_bakuhantaisei_politician_influence_max
								value = 250
							}
							assign_CHARACTER_LIFE_EXPECTANCY_STDDEV_value = yes
							add_modifier = {
								name = modifier_bakufu_recently_appointed
								months = { 24 48 }
							}
							random_list = {
								1 = { }
								1 = {
									add_random_trait = personality
								}
							}
							c:JAP = {
								set_variable = { name = tairo_var value = PREV }
							}
						}
					}
				}
			}
		}
	}
}

assign_CHARACTER_LIFE_EXPECTANCY_STDDEV_value = { # 막부 정치인이기만 한 인물물은 immortal이므로 이걸로 따로 계산 때림
	random_list = {
		1 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 15 } }
		3 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 14 } }
		5 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 13 } }
		9 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 12 } }
		14 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 11 } }
		22 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 10 } }
		32 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 9 } }
		45 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 8 } }
		60 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 7 } }
		78 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 6 } }
		97 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 5 } }
		116 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 4 } }
		134 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 3 } }
		147 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 2 } }
		157 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 1 } }
		80 = { set_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value value = 0 } }
	}
	random_list = {
		1 = {}
		1 = { change_variable = { name = CHARACTER_LIFE_EXPECTANCY_STDDEV_value multiply = -1 } }
	}
}

remove_bakufu_politician_role = { # scope = character
	if = {
		limit = { has_variable = eafp_bakuhantaisei_politician_current_mission }
		remove_bakufu_politician_mission = yes
	}
	remove_variable = eafp_bakuhantaisei_politician_influence
	remove_variable = eafp_bakuhantaisei_politician_influence_max
	remove_variable = CHARACTER_LIFE_EXPECTANCY_STDDEV_value
	if = {
		limit = { is_tairo = yes }
		c:JAP = {
			remove_variable = tairo_var
		}
	}
	else_if = {
		limit = { is_rojushuza = yes }
		c:JAP = {
			remove_variable = rojushuza_var
			trigger_event = eafp_japan.4
		}
	}
	else_if = {
		limit = { is_roju = yes }
		c:JAP = {
			remove_list_variable = { name = roju_varlist target = PREV }
			trigger_event = eafp_japan.6
		}
	}
	set_character_busy_and_immortal = no
}
remove_bakufu_politician_role_without_appointment = { # scope = character
	if = {
		limit = { has_variable = eafp_bakuhantaisei_politician_current_mission }
		remove_bakufu_politician_mission = yes
	}
	remove_variable = eafp_bakuhantaisei_politician_influence
	remove_variable = eafp_bakuhantaisei_politician_influence_max
	remove_variable = CHARACTER_LIFE_EXPECTANCY_STDDEV_value
	if = {
		limit = { is_tairo = yes }
		c:JAP = {
			remove_variable = tairo_var
		}
	}
	else_if = {
		limit = { is_rojushuza = yes }
		c:JAP = {
			remove_variable = rojushuza_var
		}
	}
	else_if = {
		limit = { is_roju = yes }
		c:JAP = {
			remove_list_variable = { name = roju_varlist target = PREV }
		}
	}
	set_character_busy_and_immortal = no
}

remove_bakufu_politician_mission = { # scope = character
	custom_tooltip = {
		text = remove_bakufu_politician_mission_tt
		if = {
			limit = { has_variable = eafp_bakuhantaisei_politician_current_mission }
			switch = {
				trigger = var:eafp_bakuhantaisei_politician_current_mission
				flag:eafp_oversee_daimyo_domains = {
					var:eafp_bakuhantaisei_politician_current_mission_location = {
						remove_modifier = modifier_oversee_daimyo_domains
					}
					switch = {
						trigger = var:eafp_bakuhantaisei_politician_current_mission_location
						s:STATE_TOHOKU.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_TOHOKU }
						}
						s:STATE_KANTO.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_KANTO }
						}
						s:STATE_CHUBU.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_CHUBU }
						}
						s:STATE_KANSAI.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_KANSAI }
						}
						s:STATE_KYUSHU.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_KYUSHU }
						}
						s:STATE_CHUGOKU.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_CHUGOKU }
						}
						s:STATE_SHIKOKU.region_state:JAP = {
							owner = { remove_modifier = modifier_oversee_daimyo_domains_SHIKOKU }
						}
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
					remove_variable = eafp_bakuhantaisei_politician_current_mission_location
				}
				flag:eafp_reaffirm_daimyos_loyalty = {
					var:eafp_bakuhantaisei_politician_current_mission_location = {
						remove_modifier = modifier_reaffirm_daimyos_loyalty
					}
					switch = {
						trigger = var:eafp_bakuhantaisei_politician_current_mission_location
						s:STATE_TOHOKU.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_TOHOKU }
						}
						s:STATE_KANTO.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_KANTO }
						}
						s:STATE_CHUBU.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_CHUBU }
						}
						s:STATE_KANSAI.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_KANSAI }
						}
						s:STATE_KYUSHU.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_KYUSHU }
						}
						s:STATE_CHUGOKU.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_CHUGOKU }
						}
						s:STATE_SHIKOKU.region_state:JAP = {
							owner = { remove_modifier = modifier_reaffirm_daimyos_loyalty_SHIKOKU }
						}
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
					remove_variable = eafp_bakuhantaisei_politician_current_mission_location
				}
				flag:eafp_improve_relation_with_court = {
					owner = {
						remove_modifier = modifier_improve_relation_with_court
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
				}
				flag:eafp_focus_on_administration = {
					owner = {
						remove_modifier = modifier_focus_on_administration
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
				}
				flag:eafp_bill_review = {
					owner = {
						remove_modifier = modifier_bill_review
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
				}
				flag:eafp_grease_administration = {
					owner = {
						remove_modifier = modifier_grease_administration
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
				}
				flag:eafp_increase_investment = {
					owner = {
						remove_modifier = modifier_increase_investment
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
				}
				flag:eafp_collect_tax = {
					owner = {
						remove_modifier = modifier_collect_tax
					}
					remove_variable = eafp_bakuhantaisei_politician_current_mission
				}
			}
		}
	}
}

add_bakuhantaisei_politician_influence = {
	if = { # 평소
		limit = {
			var:eafp_bakuhantaisei_politician_influence_max >= {
				value = var:eafp_bakuhantaisei_politician_influence
				add = $VALUE$
			}
		}
		change_variable = {
			name = eafp_bakuhantaisei_politician_influence
			add = $VALUE$
		}
		custom_description = {
			text = add_bakuhantaisei_politician_influence
			value = $VALUE$
		}
	}
	else_if = { # 합이 음수
		limit = {
			0 >= {
				value = var:eafp_bakuhantaisei_politician_influence
				add = $VALUE$
			}
		}
		set_local_variable = {
			name = temp
			value = {
				value = var:eafp_bakuhantaisei_politician_influence
				multiply = -1
			}
		}
		custom_description = {
			text = add_bakuhantaisei_politician_influence
			value = local_var:temp
		}
		remove_local_variable = temp
		set_variable = {
			name = eafp_bakuhantaisei_politician_influence
			value = 0
		}
	}
	else = { # 합이 최대치 이상
		set_local_variable = {
			name = temp
			value = {
				value = var:eafp_bakuhantaisei_politician_influence_max
				subtract = var:eafp_bakuhantaisei_politician_influence
			}
		}
		custom_description = {
			text = add_bakuhantaisei_politician_influence
			value = local_var:temp
		}
		remove_local_variable = temp
		set_variable = {
			name = eafp_bakuhantaisei_politician_influence
			value = var:eafp_bakuhantaisei_politician_influence_max
		}
	}
}

add_bakuhantaisei_politician_influence_calc_nankiha = { # 난키파 등용
	# hitotsubashiha_invested_influence, nankiha_invested_influence를 값으로 받음
	every_scope_character = {
		limit = {
			has_variable = eafp_bakuhantaisei_politician_influence
		}
		if = {
			limit = { is_nankiha = yes }
			set_variable = { # 이겼으면 넘치게 투자한 정치력은 절반만, 나머지는 전부 소모
				name = add_bakuhantaisei_politician_influence_value_var
				value = {
					#value = var:invested_influence # 왜 없다고 에러 뜨는지 ㅁㄹ...
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
					multiply = {
						value = 1
						add = {
							value = $hitotsubashiha_invested_influence$
							divide = $nankiha_invested_influence$
						}
					}
					multiply = -0.5
				}
			}
		}
		else = {
			set_variable = { # 그 외 절반만 소모
				name = add_bakuhantaisei_politician_influence_value_var
				value = {
					value = var:invested_influence
					multiply = -0.5
				}
			}
		}
		add_bakuhantaisei_politician_influence = { VALUE = var:add_bakuhantaisei_politician_influence_value_var }
		remove_variable = add_bakuhantaisei_politician_influence_value_var
	}
}

add_bakuhantaisei_politician_influence_calc_hitotsubashiha = { # 히토츠바시파 등용
	# hitotsubashiha_invested_influence, nankiha_invested_influence를 값으로 받음
	every_scope_character = {
		limit = {
			has_variable = eafp_bakuhantaisei_politician_influence
		}
		if = {
			limit = { is_hitotsubashiha = yes }
			set_variable = { # 이겼으면 넘치게 투자한 정치력은 절반만, 나머지는 전부 소모
				name = add_bakuhantaisei_politician_influence_value_var
				value = {
					#value = var:invested_influence # 왜 없다고 에러 뜨는지 ㅁㄹ...
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
					multiply = {
						value = 1
						add = {
							value = $nankiha_invested_influence$
							divide = $hitotsubashiha_invested_influence$
						}
					}
					multiply = -0.5
				}
			}
		}
		else = {
			set_variable = { # 그 외 절반만 소모
				name = add_bakuhantaisei_politician_influence_value_var
				value = {
					value = var:invested_influence
					multiply = -0.5
				}
			}
		}
		add_bakuhantaisei_politician_influence = { VALUE = var:add_bakuhantaisei_politician_influence_value_var }
		remove_variable = add_bakuhantaisei_politician_influence_value_var
	}
}

add_bakuhantaisei_politician_influence_calc_moderate = { # 중도파 등용
	every_scope_character = {
		limit = { has_variable = eafp_bakuhantaisei_politician_influence }
		if = {
			limit = {
				has_ideology = ideology:ideology_moderate
			}
			set_variable = { # 3/4만 소모
				name = add_bakuhantaisei_politician_influence_value_var
				value = {
					value = var:invested_influence
					multiply = -0.75
				}
			}
		}
		else = {
			set_variable = { # 그 외 절반만 소모
				name = add_bakuhantaisei_politician_influence_value_var
				value = {
					value = var:invested_influence
					multiply = -0.5
				}
			}
		}
		add_bakuhantaisei_politician_influence = { VALUE = var:add_bakuhantaisei_politician_influence_value_var }
		remove_variable = add_bakuhantaisei_politician_influence_value_var
	}
}

bakufu_kaikaku_progress_bar_monthly_calc = {
	change_variable = { name = hitotsubashiha_influence_var add = var:hitotsubashiha_influence_var_monthly_add } 
	change_variable = { name = nankiha_influence_var add = var:nankiha_influence_var_monthly_add }
	set_local_variable = {
		name = sum
		value = {
			value = var:hitotsubashiha_influence_var
			add = var:nankiha_influence_var
		}
	}
	set_variable = {
		name = hitotsubashiha_influence_var
		value = {
			value = var:hitotsubashiha_influence_var
			multiply = 0.9
			add = {
				value = var:hitotsubashiha_influence_var
				divide = local_var:sum
				multiply = 100
				multiply = 0.1
			}
		}
	}
	set_variable = {
		name = nankiha_influence_var
		value = {
			value = var:nankiha_influence_var
			multiply = 0.9
			add = {
				value = var:nankiha_influence_var
				divide = local_var:sum
				multiply = 100
				multiply = 0.1
			}
		}
	}
	remove_local_variable = sum
	clamp_variable = {
		name = hitotsubashiha_influence_var
		max = 10000
		min = 5
	}
	clamp_variable = {
		name = nankiha_influence_var
		max = 10000
		min = 5
	}
	bakufu_kaikaku_progress_bar_calc = yes
}

bakufu_kaikaku_progress_bar_calc = {
	if = {
		limit = { has_journal_entry = je_bakufu_kaikaku }
		je:je_bakufu_kaikaku = {
			add_progress = {
				name = bakufu_kaikaku_progress_bar
				value = {
					value = owner.var:hitotsubashiha_influence_var
					divide = {
						value = owner.var:hitotsubashiha_influence_var
						add = owner.var:nankiha_influence_var
					}
					multiply = 100
					subtract = "scripted_bar_progress(bakufu_kaikaku_progress_bar)"
					multiply = -1
				}
			}
		}
	}
}

add_hitotsubashiha_influence_var = {
	change_variable = {
		name = hitotsubashiha_influence_var
		add = $VALUE$
	}
	bakufu_kaikaku_progress_bar_calc = yes
	custom_description = {
		text = add_hitotsubashiha_influence_var
		value = $VALUE$
	}
}

add_nankiha_influence_var = {
	change_variable = {
		name = nankiha_influence_var
		add = $VALUE$
	}
	bakufu_kaikaku_progress_bar_calc = yes
	custom_description = {
		text = add_nankiha_influence_var
		value = $VALUE$
	}
}

add_hitotsubashiha_approval = {
	je:je_bakufu_kaikaku = {
		add_progress = {
			name = bakufu_kaikaku_hitotsubashiha_approval_progress_bar
			value = $VALUE$
		}
	}
	custom_description = {
		text = add_hitotsubashiha_approval
		value = $VALUE$
	}
}

add_nankiha_approval = {
	je:je_bakufu_kaikaku = {
		add_progress = {
			name = bakufu_kaikaku_nankiha_approval_progress_bar
			value = $VALUE$
		}
	}
	custom_description = {
		text = add_nankiha_approval
		value = $VALUE$
	}
}

weekly_pulse_bakufu_kaikaku_progress_bar_faction = { 
	set_variable = {
		name = hitotsubashiha_influence_var_monthly_add
		value = 0
	}
	set_variable = {
		name = nankiha_influence_var_monthly_add
		value = 0
	}
	# 인물에 따른 파벌 변수 변화
	set_variable = {
		name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_hitotsubashiha_character
		value = 0
	}
	set_variable = {
		name = bakufu_kaikaku_progress_bar_nankiha_from_nankiha_character
		value = 0
	}
	set_variable = {
		name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_nankiha_character
		value = 0
	}
	set_variable = {
		name = bakufu_kaikaku_progress_bar_nankiha_from_hitotsubashiha_character
		value = 0
	}
	every_scope_character = {
		if = {
			limit = {
				is_hitotsubashiha = yes
			}
			if = {
				limit = {
					popularity >= -10
				}
				owner = {
					change_variable = {
						name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_hitotsubashiha_character
						add = {
							value = PREV.popularity
							add = 10
						}
					}
				}
			}
			else = {
				owner = {
					change_variable = {
						name = bakufu_kaikaku_progress_bar_nankiha_from_hitotsubashiha_character
						subtract = {
							value = PREV.popularity
							add = 10
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				is_nankiha = yes
			}
			if = {
				limit = {
					popularity >= -10
				}
				owner = {
					change_variable = {
						name = bakufu_kaikaku_progress_bar_nankiha_from_nankiha_character
						add = {
							value = PREV.popularity
							add = 10
						}
					}
				}
			}
			else = {
				owner = {
					change_variable = {
						name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_nankiha_character
						subtract = {
							value = PREV.popularity
							add = 10
						}
					}
				}
			}
		}
	}
	change_variable = { name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_hitotsubashiha_character multiply = 0.0025 } # 수치조정 TODO
	change_variable = { name = bakufu_kaikaku_progress_bar_nankiha_from_nankiha_character multiply = 0.0025 } # 수치조정 TODO
	change_variable = { name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_nankiha_character multiply = 0.0025 } # 수치조정 TODO
	change_variable = { name = bakufu_kaikaku_progress_bar_nankiha_from_hitotsubashiha_character multiply = 0.0025 } # 수치조정 TODO
	change_variable = {
		name = hitotsubashiha_influence_var_monthly_add
		add = var:bakufu_kaikaku_progress_bar_hitotsubashiha_from_hitotsubashiha_character
	}
	change_variable = {
		name = nankiha_influence_var_monthly_add
		add = var:bakufu_kaikaku_progress_bar_nankiha_from_nankiha_character
	}
	change_variable = {
		name = hitotsubashiha_influence_var_monthly_add
		add = var:bakufu_kaikaku_progress_bar_hitotsubashiha_from_nankiha_character
	}
	change_variable = {
		name = nankiha_influence_var_monthly_add
		add = var:bakufu_kaikaku_progress_bar_nankiha_from_hitotsubashiha_character
	}

	# 이해집단
	set_variable = {
		name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_igs
		value = 0
	}
	set_variable = {
		name = bakufu_kaikaku_progress_bar_nankiha_from_igs
		value = 0
	}
	every_interest_group = {
		if = {
			limit = { leader= { is_hitotsubashiha = yes } }
			owner = { change_variable = { name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_igs add = PREV.ig_clout } }
			if = {
				limit = { is_in_government = yes }
				owner = { change_variable = { name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_igs add = PREV.ig_clout } }
			}
		}
		if = {
			limit = { leader= { is_nankiha = yes } }
			owner = { change_variable = { name = bakufu_kaikaku_progress_bar_nankiha_from_igs add = PREV.ig_clout } }
			if = {
				limit = { is_in_government = yes }
				owner = { change_variable = { name = bakufu_kaikaku_progress_bar_nankiha_from_igs add = PREV.ig_clout } }
			}
		}
		
	}
	change_variable = { name = bakufu_kaikaku_progress_bar_hitotsubashiha_from_igs multiply = 1 } # 수치조정 TODO
	change_variable = { name = bakufu_kaikaku_progress_bar_nankiha_from_igs multiply = 1 } # 수치조정 TODO
	change_variable = {
		name = hitotsubashiha_influence_var_monthly_add
		add = var:bakufu_kaikaku_progress_bar_hitotsubashiha_from_igs
	}
	change_variable = {
		name = nankiha_influence_var_monthly_add
		add = var:bakufu_kaikaku_progress_bar_nankiha_from_igs
	}

	# 변화 요인
	change_variable = {
		name = hitotsubashiha_influence_var_monthly_add
		add = modifier:country_hitotsubashiha_influence_var_monthly_add
	}
	change_variable = {
		name = nankiha_influence_var_monthly_add
		add = modifier:country_nankiha_influence_var_monthly_add
	}
}

# 막번체제

je_bakuhantaisei_STATE_weekly_pulse = {
	set_variable = {
		name = bakuhantaisei_tax_collection_lose_$STATE$_var # 몇%의 세금 걷지 못하는지 계산
		value = {
			value = 1
			subtract = { # 막부 직할령에선 완전히 걷음
				value = bakuhantaisei_$STATE$_goryo_progress_bar_value
				divide = 100
			}
			multiply = { # 다이묘 땅에선 독립도에 따라 걷음
				value = bakuhantaisei_$STATE$_independency_progress_bar_value
				divide = 100
				multiply = 0.5
			}
		}
	}
	s:STATE_$STATE$.region_state:JAP = {
		remove_modifier = bakuhantaisei_tax_collection_lose_modifier
		remove_modifier = bakuhantaisei_han_independency_modifier
		add_modifier = {
			name = bakuhantaisei_tax_collection_lose_modifier
			multiplier = owner.var:bakuhantaisei_tax_collection_lose_$STATE$_var
		}
		add_modifier = {
			name = bakuhantaisei_han_independency_modifier
			multiplier = {
				value = owner.bakuhantaisei_$STATE$_independency_progress_bar_value
				divide = 100
			}
		}
	}
	if = {
		limit = { bakuhantaisei_$STATE$_loyalty_progress_bar_value >= 50 }
		ig:ig_landowners = {
			remove_modifier = bakuhantaisei_daimyo_approval_positive_$STATE$_modifier
			remove_modifier = bakuhantaisei_daimyo_approval_negative_$STATE$_modifier
			add_modifier = {
				name = bakuhantaisei_daimyo_approval_positive_$STATE$_modifier
				multiplier = {
					value = owner.bakuhantaisei_$STATE$_loyalty_progress_bar_value
					subtract = 50
					multiply = {
						value = 100
						subtract = owner.bakuhantaisei_$STATE$_independency_progress_bar_value
					}
					divide = 5000
				}
			}
		}
	}
	else = {
		ig:ig_landowners = {
			remove_modifier = bakuhantaisei_daimyo_approval_positive_$STATE$_modifier
			remove_modifier = bakuhantaisei_daimyo_approval_negative_$STATE$_modifier
			add_modifier = {
				name = bakuhantaisei_daimyo_approval_negative_$STATE$_modifier
				multiplier = {
					value = 50
					subtract = owner.bakuhantaisei_$STATE$_loyalty_progress_bar_value
					multiply = {
						value = 100
						subtract = owner.bakuhantaisei_$STATE$_independency_progress_bar_value
					}
					divide = 5000
				}
			}
		}
	}
}
je_bakuhantaisei_STATE_clear = {
	hidden_effect = {
		# je_bakuhantaisei_STATE_weekly_pulse와 비슷한데 감쇠 붙음
		set_variable = {
			name = bakuhantaisei_tax_collection_lose_$STATE$_var # 몇%의 세금 걷지 못하는지 계산
			value = {
				value = 1
				subtract = { # 막부 직할령에선 완전히 걷음
					value = bakuhantaisei_$STATE$_goryo_progress_bar_value
					divide = 100
				}
				multiply = { # 다이묘 땅에선 독립도에 따라 걷음
					value = bakuhantaisei_$STATE$_independency_progress_bar_value
					divide = 100
					multiply = 0.5
				}
			}
		}
		s:STATE_$STATE$.region_state:JAP = {
			remove_modifier = bakuhantaisei_tax_collection_lose_modifier
			remove_modifier = bakuhantaisei_han_independency_modifier
			add_modifier = {
				name = bakuhantaisei_tax_collection_lose_modifier
				multiplier = owner.var:bakuhantaisei_tax_collection_lose_$STATE$_var
				months = 24
				is_decaying = yes
			}
			add_modifier = {
				name = bakuhantaisei_han_independency_modifier
				multiplier = {
					value = owner.bakuhantaisei_$STATE$_independency_progress_bar_value
					divide = 100
				}
				months = 24
					is_decaying = yes
			}
		}
		if = {
			limit = { bakuhantaisei_$STATE$_loyalty_progress_bar_value >= 50 }
			ig:ig_landowners = {
				remove_modifier = bakuhantaisei_daimyo_approval_positive_$STATE$_modifier
				remove_modifier = bakuhantaisei_daimyo_approval_negative_$STATE$_modifier
				add_modifier = {
					name = bakuhantaisei_daimyo_approval_positive_$STATE$_modifier
					multiplier = {
						value = owner.bakuhantaisei_$STATE$_loyalty_progress_bar_value
						subtract = 50
						multiply = {
							value = 100
							subtract = owner.bakuhantaisei_$STATE$_independency_progress_bar_value
						}
						divide = 5000
					}
					months = 24
					is_decaying = yes
				}
			}
		}
		else = {
			ig:ig_landowners = {
				remove_modifier = bakuhantaisei_daimyo_approval_positive_$STATE$_modifier
				remove_modifier = bakuhantaisei_daimyo_approval_negative_$STATE$_modifier
				add_modifier = {
					name = bakuhantaisei_daimyo_approval_negative_$STATE$_modifier
					multiplier = {
						value = 50
						subtract = owner.bakuhantaisei_$STATE$_loyalty_progress_bar_value
						multiply = {
							value = 100
							subtract = owner.bakuhantaisei_$STATE$_independency_progress_bar_value
						}
						divide = 5000
					}
					months = 24
					is_decaying = yes
				}
			}
		}
		
		remove_variable = bakuhantaisei_tax_collection_lose_$STATE$_var
	}
}

add_bakuhantaisei_bakufu_authority = {
	je:je_bakuhantaisei = {
		add_progress = { value = $VALUE$ name = bakuhantaisei_bakufu_authority_progress_bar }
	}
	custom_description = {
		text = add_bakuhantaisei_bakufu_authority 
		value = $VALUE$
	}
}
add_bakuhantaisei_state_loyalty = {
	switch = {
		trigger = $TARGET$
		s:STATE_TOHOKU.region_state:JAP = {
			je:je_bakuhantaisei_TOHOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_TOHOKU_loyalty_progress_bar }
			}
		}
		s:STATE_KANTO.region_state:JAP = {
			je:je_bakuhantaisei_KANTO = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KANTO_loyalty_progress_bar }
			}
		}
		s:STATE_CHUBU.region_state:JAP = {
			je:je_bakuhantaisei_CHUBU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_CHUBU_loyalty_progress_bar }
			}
		}
		s:STATE_KANSAI.region_state:JAP = {
			je:je_bakuhantaisei_KANSAI = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KANSAI_loyalty_progress_bar }
			}
		}
		s:STATE_KYUSHU.region_state:JAP = {
			je:je_bakuhantaisei_KYUSHU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KYUSHU_loyalty_progress_bar }
			}
		}
		s:STATE_CHUGOKU.region_state:JAP = {
			je:je_bakuhantaisei_CHUGOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_CHUGOKU_loyalty_progress_bar }
			}
		}
		s:STATE_SHIKOKU.region_state:JAP = {
			je:je_bakuhantaisei_SHIKOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_SHIKOKU_loyalty_progress_bar }
			}
		}
	}
	custom_description = {
		text = add_bakuhantaisei_state_loyalty 
		object = $TARGET$
		value = $VALUE$
	}
}
add_bakuhantaisei_state_independency = {
	switch = {
		trigger = $TARGET$
		s:STATE_TOHOKU.region_state:JAP = {
			je:je_bakuhantaisei_TOHOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_TOHOKU_independency_progress_bar }
			}
		}
		s:STATE_KANTO.region_state:JAP = {
			je:je_bakuhantaisei_KANTO = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KANTO_independency_progress_bar }
			}
		}
		s:STATE_CHUBU.region_state:JAP = {
			je:je_bakuhantaisei_CHUBU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_CHUBU_independency_progress_bar }
			}
		}
		s:STATE_KANSAI.region_state:JAP = {
			je:je_bakuhantaisei_KANSAI = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KANSAI_independency_progress_bar }
			}
		}
		s:STATE_KYUSHU.region_state:JAP = {
			je:je_bakuhantaisei_KYUSHU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KYUSHU_independency_progress_bar }
			}
		}
		s:STATE_CHUGOKU.region_state:JAP = {
			je:je_bakuhantaisei_CHUGOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_CHUGOKU_independency_progress_bar }
			}
		}
		s:STATE_SHIKOKU.region_state:JAP = {
			je:je_bakuhantaisei_SHIKOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_SHIKOKU_independency_progress_bar }
			}
		}
	}
	custom_description = {
		text = add_bakuhantaisei_state_independency
		object = $TARGET$
		value = $VALUE$
	}
}
add_bakuhantaisei_state_goryo = {
	switch = {
		trigger = $TARGET$
		s:STATE_TOHOKU.region_state:JAP = {
			je:je_bakuhantaisei_TOHOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_TOHOKU_goryo_progress_bar }
			}
		}
		s:STATE_KANTO.region_state:JAP = {
			je:je_bakuhantaisei_KANTO = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KANTO_goryo_progress_bar }
			}
		}
		s:STATE_CHUBU.region_state:JAP = {
			je:je_bakuhantaisei_CHUBU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_CHUBU_goryo_progress_bar }
			}
		}
		s:STATE_KANSAI.region_state:JAP = {
			je:je_bakuhantaisei_KANSAI = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KANSAI_goryo_progress_bar }
			}
		}
		s:STATE_KYUSHU.region_state:JAP = {
			je:je_bakuhantaisei_KYUSHU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_KYUSHU_goryo_progress_bar }
			}
		}
		s:STATE_CHUGOKU.region_state:JAP = {
			je:je_bakuhantaisei_CHUGOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_CHUGOKU_goryo_progress_bar }
			}
		}
		s:STATE_SHIKOKU.region_state:JAP = {
			je:je_bakuhantaisei_SHIKOKU = {
				add_progress = { value = $VALUE$ name = bakuhantaisei_SHIKOKU_goryo_progress_bar }
			}
		}
	}
	custom_description = {
		text = add_bakuhantaisei_state_goryo
		object = $TARGET$
		value = $VALUE$
	}
}

assign_tobaku_hans = {
	# 규슈
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				1000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SATS
			origin = this
			province = p:x70D080
			province = p:x5C7980
			province = p:x1F0D2C
			province = p:xCEA020
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SATS = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=3
					reserves=1
				}
				create_building={
					building="building_naval_base"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				2000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = FUKU
			origin = this
			province = p:x70CF00
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:FUKU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
				create_building={
					building="building_naval_base"
					level=1
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				3000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SAGA
			origin = this
			province = p:xAE5874
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SAGA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				4000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KURU
			origin = this
			province = p:xE16F98
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KURU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=1
					reserves=1
				}
				create_building={
					building="building_naval_base"
					level=1
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				5000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KUMA
			origin = this
			province = p:x705080
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KUMA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				6000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TSUS
			origin = this
			province = p:xF0D000
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TSUS = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=1
					reserves=1
				}
				create_building={
					building="building_naval_base"
					level=1
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				7000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = OKA
			origin = this
			province = p:x906F1E
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:OKA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				8000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = NOBE
			origin = this
			province = p:xEF5080
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:NOBE = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KYUSHU ?= {
				9000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KYUSHU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KYUSHU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KOKU
			origin = this
			province = p:x73414A
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KOKU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}

	# 홋카이도
	if = {
		limit = {
			# matsumae_chusei_value >= 80
			always = no
		}
		create_country = {
			tag = MATS
			origin = this
			province = p:xA090C0
			province = p:x40BDB8
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:MATS = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}

	# 도호쿠
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				1250 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KUBO
			origin = this
			province = p:x3190C0
			province = p:x15EED4
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KUBO = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				2500 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = HISA
			origin = this
			province = p:xE0D080
			province = p:xE22202
			province = p:xBC2AFE
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:HISA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				3750 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = MORI
			origin = this
			province = p:xBED026
			province = p:x4C5533
			province = p:x81A720
			province = p:xB011C0
			province = p:x1BAF33
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:MORI = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				5000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = YONE
			origin = this
			province = p:xAC762F
			province = p:x322F47
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:YONE = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				6250 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SHON
			origin = this
			province = p:xF29D08
			province = p:x637FEB
			province = p:x701040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SHON = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				7500 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = AIZU
			origin = this
			province = p:x19C715
			province = p:x3CA2FC
			province = p:xF01040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:AIZU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_TOHOKU ?= {
				8750 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_TOHOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_TOHOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SNDA
			origin = this
			province = p:xB090C0
			province = p:xA26E5F
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SNDA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}

	# 간토
	if = {
		limit = {
			je:je_bakuhantaisei_KANTO ?= {
				2000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANTO_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANTO_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANTO_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KAWA
			origin = this
			province = p:x7090C0
			province = p:x787CC4
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KAWA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANTO ?= {
				4000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANTO_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANTO_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANTO_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SAKU
			origin = this
			province = p:x478599
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SAKU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANTO ?= {
				6000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANTO_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANTO_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANTO_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = UTSU
			origin = this
			province = p:xD350FB
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:UTSU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANTO ?= {
				8000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANTO_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANTO_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANTO_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = MITO
			origin = this
			province = p:xEAE893
			province = p:x709040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:MITO = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}

	# 추부
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				1250 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = FUKI
			origin = this
			province = p:xB0D040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:FUKI = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				2500 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = MASH
			origin = this
			province = p:xD12DC5
			province = p:x779089
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:MASH = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				3750 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = OWAR
			origin = this
			province = p:x9B2E00
			province = p:x4942D2
			province = p:x910F25
			province = p:x3050C0
			province = p:xB050C0
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:OWAR = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				5000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TAKA
			origin = this
			province = p:xEF90C0
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TAKA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				6250 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KAGA
			origin = this
			province = p:x5A57C3
			province = p:x88595F
			province = p:x205FEB
			province = p:xC02285
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KAGA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				7500 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SHIN
			origin = this
			province = p:xB5F9BD
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SHIN = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUBU ?= {
				8750 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUBU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUBU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = NAGA
			origin = this
			province = p:xE76E8F
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:NAGA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	
	# 간사이
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				1111 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KOOR
			origin = this
			province = p:x305040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KOOR = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				2222 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KIWA
			origin = this
			province = p:xB0D0C0
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KIWA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				3333 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TSU
			origin = this
			province = p:xCCB03E
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TSU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				4444 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = SASA
			origin = this
			province = p:x879C25
			province = p:x9BD7C1
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:SASA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				5555 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = HIKO
			origin = this
			province = p:x705040
			province = p:x8EC4C9
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:HIKO = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				6666 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = AKAS
			origin = this
			province = p:x70D040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:AKAS = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				7777 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = HIME
			origin = this
			province = p:x9E58B2
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:HIME = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_KANSAI ?= {
				8888 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_KANSAI_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_KANSAI_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = KISH
			origin = this
			province = p:x614287
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:KISH = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}

	# 추고쿠
	if = {
		limit = {
			je:je_bakuhantaisei_CHUGOKU ?= {
				1428 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUGOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = CHOS
			origin = this
			province = p:xF05001
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:CHOS = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=3
					reserves=1
				}
				create_building={
					building="building_naval_base"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUGOKU ?= {
				2857 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUGOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = HAMA
			origin = this
			province = p:xA287B0
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:HAMA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUGOKU ?= {
				4285 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUGOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = HIRO
			origin = this
			province = p:x715101
			province = p:x89FD28
			province = p:xB49AFB
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:HIRO = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUGOKU ?= {
				5714 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUGOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = MATE
			origin = this
			province = p:x77D64C
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:MATE = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUGOKU ?= {
				7142 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUGOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TOTT
			origin = this
			province = p:xC8AE5C
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TOTT = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_CHUGOKU ?= {
				8571 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_CHUGOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_CHUGOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = OKAY
			origin = this
			province = p:x1151C0
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:OKAY = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}

	# 시코쿠
	if = {
		limit = {
			je:je_bakuhantaisei_SHIKOKU ?= {
				2000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_SHIKOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TOSA
			origin = this
			province = p:xEFD040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TOSA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_SHIKOKU ?= {
				4000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_SHIKOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = MAYA
			origin = this
			province = p:x90D040
			province = p:x5D5512
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:MAYA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_SHIKOKU ?= {
				6000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_SHIKOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TKSM
			origin = this
			province = p:xF05040
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TOKU = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
	if = {
		limit = {
			je:je_bakuhantaisei_SHIKOKU ?= {
				8000 <= {
					value = 100
					subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_goryo_progress_bar)"
					multiply = {
						value = "scripted_bar_progress(bakuhantaisei_SHIKOKU_independency_progress_bar)"
						subtract = "scripted_bar_progress(bakuhantaisei_SHIKOKU_loyalty_progress_bar)"
						divide = 2
						add = 50
					}
				}
			}
		}
		create_country = {
			tag = TAMA
			origin = this
			province = p:x7C9BEB
			on_created = {
				set_variable = {
					name = tobaku_han_var
				}
				change_relations = {
					country = c:JAP
					value = -50
				}
			}
		}
		c:TAMA = {
			random_scope_state = {
				create_building={
					building="building_barracks"
					level=2
					reserves=1
				}
			}
			create_bidirectional_truce = {
				country = c:JAP
				months = 36
			}
		}
	}
}

####################################################################################

#tobaku_kuni = {
#	
#	c:NIP = {
#		remove_list_global_variable = {
#			name = tobaku_list
#			target = this
#		}
#	}
#	every_in_global_list = {
#		variable = tobaku_list
#		limit = {
#			not = { c:NIP = this }
#		}
#		c:NIP = {
#			annex = prev
#		}
#	}
#	c:NIP = {
#		add_technology_researched = napoleonic_warfare
#		add_technology_researched = general_staff
#	}
#}