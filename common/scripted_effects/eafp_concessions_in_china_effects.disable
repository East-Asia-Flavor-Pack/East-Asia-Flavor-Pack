concession_state_region_status_calc = {
	# 테스트용
	every_state = {
		limit = {
			state_is_in_china_proper = yes
			is_treaty_port = no
		}
		owner = {
			set_variable = {
				name = concession_payment_var
				value = 0
			}
		}
	}
	if = {
		limit = { has_global_variable_list = STATE_GUIZHOU_concession_owner_varlist }
		every_in_global_list = {
			variable = STATE_GUIZHOU_concession_owner_varlist
			set_variable = {
				name = concession_payment_var
				value = 0
			}
		}
	}
	s:STATE_GUIZHOU = {
		every_scope_state = {
			owner = {
				set_variable = {
					name = concession_dividend_var
					value = 0
				}
			}
		}
	}



	concession_state_region_status_calc_state={STATE=STATE_GUIZHOU}
	concession_state_region_status_calc_state={STATE=STATE_CHONGQING}
	concession_state_region_status_calc_state={STATE=STATE_SICHUAN}
	concession_state_region_status_calc_state={STATE=STATE_SOUTHERN_ANHUI}
	concession_state_region_status_calc_state={STATE=STATE_SHAOZHOU}
	concession_state_region_status_calc_state={STATE=STATE_GUANGDONG}
	concession_state_region_status_calc_state={STATE=STATE_FUJIAN}
	concession_state_region_status_calc_state={STATE=STATE_FORMOSA}
	concession_state_region_status_calc_state={STATE=STATE_GUANGXI}
	concession_state_region_status_calc_state={STATE=STATE_ZHEJIANG}
	concession_state_region_status_calc_state={STATE=STATE_SUZHOU}
	concession_state_region_status_calc_state={STATE=STATE_NANJING}
	concession_state_region_status_calc_state={STATE=STATE_HUNAN}
	concession_state_region_status_calc_state={STATE=STATE_JIANGXI}
	concession_state_region_status_calc_state={STATE=STATE_YUNNAN}
	concession_state_region_status_calc_state={STATE=STATE_EASTERN_HUBEI}
	concession_state_region_status_calc_state={STATE=STATE_WESTERN_HUBEI}
	concession_state_region_status_calc_state={STATE=STATE_SHANDONG}
	concession_state_region_status_calc_state={STATE=STATE_BEIJING}
	concession_state_region_status_calc_state={STATE=STATE_ZHILI}
	concession_state_region_status_calc_state={STATE=STATE_HENAN}
	concession_state_region_status_calc_state={STATE=STATE_NORTHERN_ANHUI}
	concession_state_region_status_calc_state={STATE=STATE_SHANXI}
	concession_state_region_status_calc_state={STATE=STATE_JIANGSU}
	concession_state_region_status_calc_state={STATE=STATE_NINGXIA}
	concession_state_region_status_calc_state={STATE=STATE_GANSU}
	concession_state_region_status_calc_state={STATE=STATE_XIAN}
}

concession_state_region_status_calc_scope = {
	if = {
		limit = { scope:concession_state_region = s:STATE_GUIZHOU }
		concession_state_region_status_calc_state={STATE=STATE_GUIZHOU}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_CHONGQING }
		concession_state_region_status_calc_state={STATE=STATE_CHONGQING}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_SICHUAN }
		concession_state_region_status_calc_state={STATE=STATE_SICHUAN}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_SOUTHERN_ANHUI }
		concession_state_region_status_calc_state={STATE=STATE_SOUTHERN_ANHUI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_SHAOZHOU }
		concession_state_region_status_calc_state={STATE=STATE_SHAOZHOU}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_GUANGDONG }
		concession_state_region_status_calc_state={STATE=STATE_GUANGDONG}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_FUJIAN }
		concession_state_region_status_calc_state={STATE=STATE_FUJIAN}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_FORMOSA }
		concession_state_region_status_calc_state={STATE=STATE_FORMOSA}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_GUANGXI }
		concession_state_region_status_calc_state={STATE=STATE_GUANGXI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_ZHEJIANG }
		concession_state_region_status_calc_state={STATE=STATE_ZHEJIANG}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_SUZHOU }
		concession_state_region_status_calc_state={STATE=STATE_SUZHOU}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_NANJING }
		concession_state_region_status_calc_state={STATE=STATE_NANJING}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_HUNAN }
		concession_state_region_status_calc_state={STATE=STATE_HUNAN}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_JIANGXI }
		concession_state_region_status_calc_state={STATE=STATE_JIANGXI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_YUNNAN }
		concession_state_region_status_calc_state={STATE=STATE_YUNNAN}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_EASTERN_HUBEI }
		concession_state_region_status_calc_state={STATE=STATE_EASTERN_HUBEI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_WESTERN_HUBEI }
		concession_state_region_status_calc_state={STATE=STATE_WESTERN_HUBEI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_SHANDONG }
		concession_state_region_status_calc_state={STATE=STATE_SHANDONG}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_BEIJING }
		concession_state_region_status_calc_state={STATE=STATE_BEIJING}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_ZHILI }
		concession_state_region_status_calc_state={STATE=STATE_ZHILI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_HENAN }
		concession_state_region_status_calc_state={STATE=STATE_HENAN}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_NORTHERN_ANHUI }
		concession_state_region_status_calc_state={STATE=STATE_NORTHERN_ANHUI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_SHANXI }
		concession_state_region_status_calc_state={STATE=STATE_SHANXI}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_JIANGSU }
		concession_state_region_status_calc_state={STATE=STATE_JIANGSU}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_NINGXIA }
		concession_state_region_status_calc_state={STATE=STATE_NINGXIA}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_GANSU }
		concession_state_region_status_calc_state={STATE=STATE_GANSU}
	}
	else_if = {
		limit = { scope:concession_state_region = s:STATE_XIAN }
		concession_state_region_status_calc_state={STATE=STATE_XIAN}
	}
}

# 전 세계 조계지 관련 계산 여기 다 때려박음

concession_state_region_status_calc_state = {
	# $STATE$_concession_owner_varlist로 뭘 계산해?
}

concession_state_region_status_calc_on_civil_war_won = {
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_GUIZHOU}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_CHONGQING}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_SICHUAN}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_SOUTHERN_ANHUI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_SHAOZHOU}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_GUANGDONG}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_FUJIAN}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_FORMOSA}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_GUANGXI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_ZHEJIANG}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_SUZHOU}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_NANJING}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_HUNAN}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_JIANGXI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_YUNNAN}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_EASTERN_HUBEI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_WESTERN_HUBEI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_SHANDONG}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_BEIJING}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_ZHILI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_HENAN}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_NORTHERN_ANHUI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_SHANXI}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_JIANGSU}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_NINGXIA}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_GANSU}
	concession_state_region_status_calc_state_on_civil_war_won={STATE=STATE_XIAN}
}

concession_state_region_status_calc_state_on_civil_war_won = {
	random_in_global_list = { # TODO 디버깅하기
		variable = concession_candidate_states_gvarlist
		limit = { state_region = s:$STATE$ }
		if = {
			limit = { has_variable_list = concession_owner_varlist }
			set_local_variable = {
				name = country_num
				value = 0
			}
			every_in_list = {
				variable = concession_owner_varlist
				change_local_variable = {
					name = country_num
					add = 1
				}
			}
			if = {
				limit = { variable_list_size = { name = concession_owner_varlist value > local_var:country_num } }
				if = {
					limit = { NOT = { is_target_in_variable_list = { name = concession_state_owner_varlist target = ROOT } } }
					add_to_variable_list = { name = concession_owner_varlist target = ROOT }
					change_local_variable = {
						name = concession_num
						add = 1
					}
				}
			}
			remove_local_variable = country_num
		}
	}
}