namespace = eafp_japan
#일본 저널입니다.
#기본적으로 변수명은 일본어 발음입니다.
#다음 분류에 따라 이벤트 번호를 지정했습니다.

# 0000번대 : 시스템 + 막부 정치인 이벤트
# 1000번대 : 플레이버 이벤트
# 2000번대 : 막부 개혁 이벤트 체인
# 3000번대 : 보신전쟁 이벤트 체인
# 4000번대 : 개항 이벤트 체인
# 5000번대 : 메이지유신 이벤트 체인
# 6000번대 : 메이지 헌법 이후 이벤트 체인


#####################################

eafp_japan.1 = { # 막번체제 초기화용
	type = country_event
	placement = root

	title = eafp_japan.1.t
	desc = eafp_japan.1.d
	flavor = eafp_japan.1.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	immediate = {
		je:je_bakuhantaisei_TOHOKU = {
			set_bar_progress = { value = bakuhantaisei_TOHOKU_loyalty_progress_bar_initial_value name = bakuhantaisei_TOHOKU_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_TOHOKU_independency_progress_bar_initial_value name = bakuhantaisei_TOHOKU_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_TOHOKU_goryo_progress_bar_initial_value name = bakuhantaisei_TOHOKU_goryo_progress_bar }
		}

		je:je_bakuhantaisei_KANTO = {
			set_bar_progress = { value = bakuhantaisei_KANTO_loyalty_progress_bar_initial_value name = bakuhantaisei_KANTO_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_KANTO_independency_progress_bar_initial_value name = bakuhantaisei_KANTO_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_KANTO_goryo_progress_bar_initial_value name = bakuhantaisei_KANTO_goryo_progress_bar }
		}

		je:je_bakuhantaisei_CHUBU = {
			set_bar_progress = { value = bakuhantaisei_CHUBU_loyalty_progress_bar_initial_value name = bakuhantaisei_CHUBU_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_CHUBU_independency_progress_bar_initial_value name = bakuhantaisei_CHUBU_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_CHUBU_goryo_progress_bar_initial_value name = bakuhantaisei_CHUBU_goryo_progress_bar }
		}

		je:je_bakuhantaisei_KANSAI = {
			set_bar_progress = { value = bakuhantaisei_KANSAI_loyalty_progress_bar_initial_value name = bakuhantaisei_KANSAI_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_KANSAI_independency_progress_bar_initial_value name = bakuhantaisei_KANSAI_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_KANSAI_goryo_progress_bar_initial_value name = bakuhantaisei_KANSAI_goryo_progress_bar }
		}

		je:je_bakuhantaisei_KYUSHU = {
			set_bar_progress = { value = bakuhantaisei_KYUSHU_loyalty_progress_bar_initial_value name = bakuhantaisei_KYUSHU_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_KYUSHU_independency_progress_bar_initial_value name = bakuhantaisei_KYUSHU_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_KYUSHU_goryo_progress_bar_initial_value name = bakuhantaisei_KYUSHU_goryo_progress_bar }
		}

		je:je_bakuhantaisei_CHUGOKU = {
			set_bar_progress = { value = bakuhantaisei_CHUGOKU_loyalty_progress_bar_initial_value name = bakuhantaisei_CHUGOKU_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_CHUGOKU_independency_progress_bar_initial_value name = bakuhantaisei_CHUGOKU_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_CHUGOKU_goryo_progress_bar_initial_value name = bakuhantaisei_CHUGOKU_goryo_progress_bar }
		}

		je:je_bakuhantaisei_SHIKOKU = {
			set_bar_progress = { value = bakuhantaisei_SHIKOKU_loyalty_progress_bar_initial_value name = bakuhantaisei_SHIKOKU_loyalty_progress_bar }
			set_bar_progress = { value = bakuhantaisei_SHIKOKU_independency_progress_bar_initial_value name = bakuhantaisei_SHIKOKU_independency_progress_bar }
			set_bar_progress = { value = bakuhantaisei_SHIKOKU_goryo_progress_bar_initial_value name = bakuhantaisei_SHIKOKU_goryo_progress_bar }
		}

		je_bakuhantaisei_STATE_weekly_pulse = { STATE = TOHOKU }
		je_bakuhantaisei_STATE_weekly_pulse = { STATE = KANTO }
		je_bakuhantaisei_STATE_weekly_pulse = { STATE = CHUBU }
		je_bakuhantaisei_STATE_weekly_pulse = { STATE = KANSAI }
		je_bakuhantaisei_STATE_weekly_pulse = { STATE = KYUSHU }
		je_bakuhantaisei_STATE_weekly_pulse = { STATE = CHUGOKU }
		je_bakuhantaisei_STATE_weekly_pulse = { STATE = SHIKOKU }

		add_journal_entry = {
			type = je_bakuhantaisei
		}
	}

	option = {
		name = eafp_japan.1.a
		default_option = yes
		show_as_tooltip = {
			add_journal_entry = {
				type = je_bakuhantaisei
			}
		}
		ai_chance = {
			base = 100
		}
	}
}

eafp_japan.2 = { # 대로 임명용 이벤트
	type = country_event
	placement = root

	title = eafp_japan.2.t
	desc = eafp_japan.2.d
	flavor = eafp_japan.2.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 1

	immediate = {
		
	}

	option = { # 히토츠바시파를 강하게 지지
		name = eafp_japan.2.a
		trigger = {
			authority >= 200
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = -25
			}
		}
		add_modifier = {
			name = modifier_political_influence_for_tairo
			months = normal_modifier_time
			multiplier = 2
		}
	}

	option = { # 히토츠바시파를 지지
		name = eafp_japan.2.b
		trigger = {
			authority >= 100
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = -12.5
			}
		}
		add_modifier = {
			name = modifier_political_influence_for_tairo
			months = normal_modifier_time
		}
	}

	option = { # 난키파를 지지
		name = eafp_japan.2.c
		trigger = {
			authority >= 100
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 12.5
			}
		}
		add_modifier = {
			name = modifier_political_influence_for_tairo
			months = normal_modifier_time
		}
	}

	option = { # 난키파를 강하게 지지
		name = eafp_japan.2.e
		trigger = {
			authority >= 200
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 25
			}
		}
		add_modifier = {
			name = modifier_political_influence_for_tairo
			months = normal_modifier_time
			multiplier = 2
		}
	}

	option = { # 알빠노?
		name = eafp_japan.2.z
		default_option = yes

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 0
			}
		}
	}

	after = {
		trigger_event = eafp_japan.3
	}
}

eafp_japan.3 = { # 대로 임명용 이벤트
	type = country_event
	placement = root

	title = eafp_japan.3.t
	desc = eafp_japan.3.d
	flavor = eafp_japan.3.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 1

	immediate = {
		# 기본적으로 파벌 지지 100의 힘 = 기본 인물 정치력 50 5명, 강한 지지 = 기본 인물 정치력 50 2.5명
		set_variable = recruiting_bakufu_politicians
		set_variable = {
			name = hitotsubashiha_invested_influence
			value = 0
		}
		set_variable = {
			name = nankiha_invested_influence
			value = 0
		}
		# 정치인마다 정치력 투자 계산
		every_scope_character = {
			limit = { has_variable = eafp_bakuhantaisei_politician_influence }
			if = {
				limit = { is_hitotsubashiha = yes }
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
				ROOT = {
					change_variable = {
						name = hitotsubashiha_invested_influence
						add = PREV.var:invested_influence
					}
				}
			}
			else_if = {
				limit = { is_nankiha = yes }
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
				ROOT = {
					change_variable = {
						name = nankiha_invested_influence
						add = PREV.var:invested_influence
					}
				}
			}
			else = {
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
			}
		}

		# 누가 뽑힐까?
		if = {
			limit = {
				exists = scope:nankiha_candidate
				25 <= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 난키파 등용
			if = {
				limit = { has_variable = hitotsubashiha_vs_nankiha_start }
				create_bakufu_politician_character = { POSITION = flag:tairo IDEOLOGY = ideology_nankiha }
			}
			else = {
				create_bakufu_politician_character = { POSITION = flag:tairo IDEOLOGY = ideology_hoshuha }
			}
			add_bakuhantaisei_politician_influence_calc_nankiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 1
			}
		}
		else_if = {
			limit = {
				-25 >= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 히토츠바시파 등용
			if = {
				limit = { has_variable = hitotsubashiha_vs_nankiha_start }
				create_bakufu_politician_character = { POSITION = flag:tairo IDEOLOGY = ideology_hitotsubashiha }
			}
			else = {
				create_bakufu_politician_character = { POSITION = flag:tairo IDEOLOGY = ideology_kaikakuha }
			}
			add_bakuhantaisei_politician_influence_calc_hitotsubashiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 2
			}
		}
		else = {
			# 중도파 등용
			create_bakufu_politician_character = { POSITION = flag:tairo IDEOLOGY = ideology_moderate }
			add_bakuhantaisei_politician_influence_calc_moderate = yes
			save_scope_value_as = {
				name = new_politician
				value = 3
			}
		}

		# 변수 정리
		remove_variable = recruiting_bakufu_politicians
		remove_variable = hitotsubashiha_invested_influence
		remove_variable = nankiha_invested_influence
		every_scope_character = {
			limit = { has_variable = invested_influence }
			remove_variable = invested_influence
		}
	}

	option = { # 난키파
		name = eafp_japan.3.nankiha
		trigger = {
			scope:new_politician = 1
		}
		custom_tooltip = eafp_japan.3.nankiha.tt
	}

	option = { # 히토츠바시파
		name = eafp_japan.3.hitotsubashiha
		trigger = {
			scope:new_politician = 2
		}
		custom_tooltip = eafp_japan.3.hitotsubashiha.tt
	}

	option = { # 중도파
		name = eafp_japan.3.moderate
		trigger = {
			scope:new_politician = 3
		}
		custom_tooltip = eafp_japan.3.moderate.tt
	}
}

eafp_japan.4 = { # 노중수좌 임명용 이벤트
	type = country_event
	placement = root

	title = eafp_japan.4.t
	desc = eafp_japan.4.d
	flavor = eafp_japan.4.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 1

	trigger = {
		NOT = { has_variable = recruiting_bakufu_politicians }
	}

	option = { # 히토츠바시파를 강하게 지지
		name = eafp_japan.4.a
		trigger = {
			authority >= 200
			exists = scope:hitotsubashiha_candidate
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = -25
			}
		}

		add_modifier = {
			name = modifier_political_influence_for_rojushuza
			months = normal_modifier_time
			multiplier = 2
		}
	}

	option = { # 히토츠바시파를 지지
		name = eafp_japan.4.b
		trigger = {
			authority >= 100
			exists = scope:hitotsubashiha_candidate
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = -12.5
			}
		}
		
		add_modifier = {
			name = modifier_political_influence_for_rojushuza
			months = normal_modifier_time
		}
	}

	option = { # 난키파를 지지
		name = eafp_japan.4.c
		trigger = {
			authority >= 100
			exists = scope:nankiha_candidate
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 12.5
			}
		}

		add_modifier = {
			name = modifier_political_influence_for_rojushuza
			months = normal_modifier_time
		}
	}

	option = { # 난키파를 강하게 지지
		name = eafp_japan.4.e
		trigger = {
			authority >= 200
			exists = scope:nankiha_candidate
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 25
			}
		}
		
		add_modifier = {
			name = modifier_political_influence_for_rojushuza
			months = normal_modifier_time
			multiplier = 2
		}
	}

	option = { # 알빠노?
		name = eafp_japan.4.z
		default_option = yes

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 0
			}
		}
	}

	after = {
		trigger_event = eafp_japan.5
	}
}

eafp_japan.5 = { # 노중수좌 임명용 이벤트
	type = country_event
	placement = root

	title = eafp_japan.5.t
	desc = eafp_japan.5.d
	flavor = eafp_japan.5.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 1

	immediate = {
		# 기본적으로 파벌 지지 100의 힘 = 기본 인물 정치력 50 5명, 강한 지지 = 기본 인물 정치력 50 2.5명
		set_variable = recruiting_bakufu_politicians
		set_variable = {
			name = hitotsubashiha_invested_influence
			value = 0
		}
		set_variable = {
			name = nankiha_invested_influence
			value = 0
		}
		# 정치인마다 정치력 투자 계산
		every_scope_character = {
			limit = { has_variable = eafp_bakuhantaisei_politician_influence }
			if = {
				limit = { is_hitotsubashiha = yes }
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
				ROOT = {
					change_variable = {
						name = hitotsubashiha_invested_influence
						add = PREV.var:invested_influence
					}
				}
			}
			else_if = {
				limit = { is_nankiha = yes }
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
				ROOT = {
					change_variable = {
						name = nankiha_invested_influence
						add = PREV.var:invested_influence
					}
				}
			}
			else = {
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
			}
		}
		# 노중 스코프 저장
		if = {
			limit = {
				any_in_list = {
					variable = roju_varlist
					is_hitotsubashiha = yes
				}
			}
			ordered_in_list = {
				variable = roju_varlist
				limit = { is_hitotsubashiha = yes }
				order_by = var:eafp_bakuhantaisei_politician_influence
				save_scope_as = hitotsubashiha_candidate
			}
		}
		if = {
			limit = {
				any_in_list = {
					variable = roju_varlist
					is_nankiha = yes
				}
			}
			ordered_in_list = {
				variable = roju_varlist
				limit = { is_nankiha = yes }
				order_by = var:eafp_bakuhantaisei_politician_influence
				save_scope_as = nankiha_candidate
			}
		}
		if = {
			limit = {
				any_in_list = {
					variable = roju_varlist
					has_ideology = ideology:ideology_moderate
				}
			}
			ordered_in_list = {
				variable = roju_varlist
				limit = {
					has_ideology = ideology:ideology_moderate
				}
				order_by = var:eafp_bakuhantaisei_politician_influence
				save_scope_as = moderate_candidate
			}
		}

		# 누가 뽑힐까?
		if = {
			limit = {
				exists = scope:nankiha_candidate
				25 <= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 난키파 등용
			set_variable = { name = rojushuza_var value = scope:nankiha_candidate }
			remove_list_variable = { name = roju_varlist target = scope:nankiha_candidate }
			add_bakuhantaisei_politician_influence_calc_nankiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 1
			}
		}
		else_if = {
			limit = {
				exists = scope:hitotsubashiha_candidate
				-25 >= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 히토츠바시파 등용
			set_variable = { name = rojushuza_var value = scope:hitotsubashiha_candidate }
			remove_list_variable = { name = roju_varlist target = scope:hitotsubashiha_candidate }
			add_bakuhantaisei_politician_influence_calc_hitotsubashiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 2
			}
		}
		else_if = {
			limit = { exists = scope:moderate_candidate }
			# 중도파 등용
			set_variable = { name = rojushuza_var value = scope:moderate_candidate }
			remove_list_variable = { name = roju_varlist target = scope:moderate_candidate }
			add_bakuhantaisei_politician_influence_calc_moderate = yes
			save_scope_value_as = {
				name = new_politician
				value = 3
			}
		}
		else_if = {
			limit = {
				exists = scope:nankiha_candidate
				0 <= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 난키파 등용
			set_variable = { name = rojushuza_var value = scope:nankiha_candidate }
			remove_list_variable = { name = roju_varlist target = scope:nankiha_candidate }
			add_bakuhantaisei_politician_influence_calc_nankiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 1
			}
		}
		else = {
			# 히토츠바시파 등용
			set_variable = { name = rojushuza_var value = scope:hitotsubashiha_candidate }
			remove_list_variable = { name = roju_varlist target = scope:hitotsubashiha_candidate }
			add_bakuhantaisei_politician_influence_calc_hitotsubashiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 2
			}
		}

		# 변수 정리
		remove_variable = recruiting_bakufu_politicians
		remove_variable = hitotsubashiha_invested_influence
		remove_variable = nankiha_invested_influence
		every_scope_character = {
			limit = { has_variable = invested_influence }
			remove_variable = invested_influence
		}
	}

	option = { # 난키파
		name = eafp_japan.5.nankiha
		trigger = {
			scope:new_politician = 1
		}
		custom_tooltip = eafp_japan.5.nankiha.tt
	}

	option = { # 히토츠바시파
		name = eafp_japan.5.hitotsubashiha
		trigger = {
			scope:new_politician = 2
		}
		custom_tooltip = eafp_japan.5.hitotsubashiha.tt
	}

	option = { # 중도파
		name = eafp_japan.5.moderate
		trigger = {
			scope:new_politician = 3
		}
		custom_tooltip = eafp_japan.5.moderate.tt
	}
}

eafp_japan.6 = { # 노중 임명용 이벤트
	type = country_event
	placement = root

	title = eafp_japan.6.t
	desc = eafp_japan.6.d
	flavor = eafp_japan.6.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 1

	trigger = {
		NOT = { has_variable = recruiting_bakufu_politicians }
	}

	option = { # 히토츠바시파를 강하게 지지
		name = eafp_japan.6.a
		trigger = {
			authority >= 200
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = -25
			}
		}
		
		add_modifier = {
			name = modifier_political_influence_for_roju
			months = normal_modifier_time
			multiplier = 2
		}
	}

	option = { # 히토츠바시파를 지지
		name = eafp_japan.6.b
		trigger = {
			authority >= 100
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = -12.5
			}
		}

		add_modifier = {
			name = modifier_political_influence_for_roju
			months = normal_modifier_time
		}
	}

	option = { # 난키파를 지지
		name = eafp_japan.6.c
		trigger = {
			authority >= 100
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 12.5
			}
		}

		add_modifier = {
			name = modifier_political_influence_for_roju
			months = normal_modifier_time
		}
	}

	option = { # 난키파를 강하게 지지
		name = eafp_japan.6.e
		trigger = {
			authority >= 200
		}

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 25
			}
		}

		add_modifier = {
			name = modifier_political_influence_for_roju
			months = normal_modifier_time
			multiplier = 2
		}
	}

	option = { # 알빠노?
		name = eafp_japan.6.z
		default_option = yes

		hidden_effect = {
			save_scope_value_as = {
				name = shogun_influence
				value = 0
			}
		}
	}

	after = {
		trigger_event = eafp_japan.7
	}
}

eafp_japan.7 = { # 노중 임명용 이벤트
	type = country_event
	placement = root

	title = eafp_japan.7.t
	desc = eafp_japan.7.d
	flavor = eafp_japan.7.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 1

	immediate = {
		# 기본적으로 파벌 지지 100의 힘 = 기본 인물 정치력 50 5명, 강한 지지 = 기본 인물 정치력 50 2.5명
		set_variable = recruiting_bakufu_politicians
		set_variable = {
			name = hitotsubashiha_invested_influence
			value = 0
		}
		set_variable = {
			name = nankiha_invested_influence
			value = 0
		}
		# 정치인마다 정치력 투자 계산
		every_scope_character = {
			limit = { has_variable = eafp_bakuhantaisei_politician_influence }
			if = {
				limit = { is_hitotsubashiha = yes }
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
				ROOT = {
					change_variable = {
						name = hitotsubashiha_invested_influence
						add = PREV.var:invested_influence
					}
				}
			}
			else_if = {
				limit = { is_nankiha = yes }
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
				ROOT = {
					change_variable = {
						name = nankiha_invested_influence
						add = PREV.var:invested_influence
					}
				}
			}
			else = {
				set_variable = {
					name = invested_influence
					value = {
						value = var:eafp_bakuhantaisei_politician_influence
						multiply = bakufu_kaikaku_bakufu_politicians_activeness
					}
				}
			}
		}

		# 누가 뽑힐까?
		if = {
			limit = { 
				25 <= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 난키파 등용
			if = {
				limit = { has_variable = hitotsubashiha_vs_nankiha_start }
				create_bakufu_politician_character = { POSITION = flag:roju IDEOLOGY = ideology_nankiha }
			}
			else = {
				create_bakufu_politician_character = { POSITION = flag:roju IDEOLOGY = ideology_hoshuha }
			}
			add_bakuhantaisei_politician_influence_calc_nankiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 1
			}
		}
		else_if = {
			limit = { 
				-25 >= {
					value = var:nankiha_invested_influence
					add = var:nankiha_var
					subtract = -50
					subtract = var:hitotsubashiha_invested_influence
					add = scope:shogun_influence
				}
			}
			# 히토츠바시파 등용
			if = {
				limit = { has_variable = hitotsubashiha_vs_nankiha_start }
				create_bakufu_politician_character = { POSITION = flag:roju IDEOLOGY = ideology_hitotsubashiha }
			}
			else = {
				create_bakufu_politician_character = { POSITION = flag:roju IDEOLOGY = ideology_kaikakuha }
			}
			add_bakuhantaisei_politician_influence_calc_hitotsubashiha = yes
			save_scope_value_as = {
				name = new_politician
				value = 2
			}
		}
		else = {
			# 중도파 등용
			create_bakufu_politician_character = { POSITION = flag:roju IDEOLOGY = ideology_moderate }
			add_bakuhantaisei_politician_influence_calc_moderate = yes
			save_scope_value_as = {
				name = new_politician
				value = 3
			}
		}
		
		# 변수 정리
		remove_variable = recruiting_bakufu_politicians
		remove_variable = hitotsubashiha_invested_influence
		remove_variable = nankiha_invested_influence
		every_scope_character = {
			limit = { has_variable = invested_influence }
			remove_variable = invested_influence
		}
	}

	option = { # 난키파
		name = eafp_japan.7.nankiha
		trigger = {
			scope:new_politician = 1
		}
		custom_tooltip = eafp_japan.7.nankiha.tt
	}

	option = { # 히토츠바시파
		name = eafp_japan.7.hitotsubashiha
		trigger = {
			scope:new_politician = 2
		}
		custom_tooltip = eafp_japan.7.hitotsubashiha.tt
	}

	option = { # 중도파
		name = eafp_japan.7.moderate
		trigger = {
			scope:new_politician = 3
		}
		custom_tooltip = eafp_japan.7.moderate.tt
	}
}

eafp_japan.8 = { # 막부 정치인 실각용 히든 이벤트
	type = character_event
	hidden = yes

	trigger = {}

	immediate = { remove_bakufu_politician_role = yes }
}

eafp_japan.9 = { # 막부 정치인 수명 끝나서 죽는 용도 히든 이벤트
	type = character_event
	hidden = yes

	trigger = {}

	immediate = {
		kill_character = yes
	}
}

# 플레이버 이벤트

eafp_japan.1001 = { # 밀무역 적발
	type = country_event
	placement = scope:scope_state

	title = eafp_japan.1001.t
	desc = eafp_japan.1001.d
	flavor = eafp_japan.1001.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "votp_prison"
	}
	
	duration = 3
	
	immediate = {
		s:STATE_CHUGOKU.region_state:JAP = {
			save_scope_as = scope_state
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1001.a
		default_option = yes

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		s:STATE_CHUGOKU.region_state:JAP = {
			add_radicals_in_state = {
				value = 0.05
			}
		}
	}
	option = {
		name = eafp_japan.1001.b

		add_bakuhantaisei_bakufu_authority = {
			VALUE = -50
		}
		add_modifier = {
			name = smuggling_continues_modifier
			months = normal_modifier_time
		}
	}
	option = {
		name = eafp_japan.1001.c

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -12.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -15
		}
		s:STATE_CHUGOKU.region_state:JAP = {
			add_radicals_in_state = {
				value = 0.1
			}
		}
	}
}

eafp_japan.1002 = { # 밀무역 적발
	type = country_event
	placement = scope:scope_state

	title = eafp_japan.1002.t
	desc = eafp_japan.1002.d
	flavor = eafp_japan.1002.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "votp_prison"
	}
	
	duration = 3
	
	immediate = {
		s:STATE_CHUBU.region_state:JAP = {
			save_scope_as = scope_state
		}
		s:STATE_TOHOKU.region_state:JAP = {
			save_scope_as = scope_state2
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1002.a
		default_option = yes

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		s:STATE_CHUBU.region_state:JAP = {
			add_radicals_in_state = {
				value = 0.05
			}
		}
	}
	option = {
		name = eafp_japan.1002.b

		add_bakuhantaisei_bakufu_authority = {
			VALUE = -50
		}
		add_modifier = {
			name = smuggling_continues_modifier
			months = normal_modifier_time
		}
	}
	option = {
		name = eafp_japan.1002.c

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		s:STATE_CHUBU.region_state:JAP = {
			add_radicals_in_state = {
				value = 0.05
			}
		}
		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -10
		}
		s:STATE_TOHOKU.region_state:JAP = {
			add_radicals_in_state = {
				value = 0.15
			}
		}
	}
}

eafp_japan.1003 = { # 계승 문제
	type = country_event
	placement = scope:scope_state

	title = eafp_japan.1003.t
	desc = eafp_japan.1003.d
	flavor = eafp_japan.1003.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "votp_prison"
	}
	
	duration = 3
	
	immediate = {
		random_scope_state = {
			limit = { state_is_in_japan = yes }
			save_scope_as = scope_state
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1003.a
		default_option = yes

		random_list = {
			1 = {
				add_hitotsubashiha_var = {
					VALUE = 10
				}
			}
			1 = {
			}
			1 = {
				add_nankiha_var = {
					VALUE = 10
				}
			}
		}
	}
	option = {
		name = eafp_japan.1003.b

		add_hitotsubashiha_var = {
			VALUE = 10
		}
		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -5
		}
	}
	option = {
		name = eafp_japan.1003.c

		add_nankiha_var = {
			VALUE = 10
		}
		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -5
		}
	}
}

eafp_japan.1004 = { # 번정 개혁 논란
	type = country_event
	placement = scope:scope_state

	title = eafp_japan.1004.t
	desc = eafp_japan.1004.d
	flavor = eafp_japan.1004.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "votp_prison"
	}
	
	duration = 3
	
	immediate = {
		random_scope_state = {
			limit = { state_is_in_japan = yes }
			save_scope_as = scope_state
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1004.a
		default_option = yes

		random_list = {
			1 = {
				add_hitotsubashiha_var = {
					VALUE = 10
				}
			}
			1 = {
			}
			1 = {
				add_nankiha_var = {
					VALUE = 10
				}
			}
		}
	}
	option = {
		name = eafp_japan.1004.b

		add_hitotsubashiha_var = {
			VALUE = 10
		}
		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -5
		}
	}
	option = {
		name = eafp_japan.1004.c

		add_nankiha_var = {
			VALUE = 10
		}
		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -5
		}
	}
}

eafp_japan.1005 = { # 밀무역 적발
	type = country_event
	placement = scope:scope_state

	title = eafp_japan.1005.t
	desc = eafp_japan.1005.d
	flavor = eafp_japan.1005.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "votp_prison"
	}
	
	duration = 3
	
	immediate = {
		random_scope_state = {
			limit = { state_is_in_japan = yes }
			save_scope_as = scope_state
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1005.a
		default_option = yes

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		scope:scope_state = {
			add_radicals_in_state = {
				value = 0.05
			}
		}
	}
	option = {
		name = eafp_japan.1005.b

		add_bakuhantaisei_bakufu_authority = {
			VALUE = -50
		}
		add_modifier = {
			name = smuggling_continues_modifier
			months = normal_modifier_time
		}
	}
	option = {
		name = eafp_japan.1005.c

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -12.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -15
		}
		scope:scope_state = {
			add_radicals_in_state = {
				value = 0.1
			}
		}
	}
}

eafp_japan.1006 = { # 위조화폐 제조
	type = country_event
	placement = scope:scope_state

	title = eafp_japan.1006.t
	desc = eafp_japan.1006.d
	flavor = eafp_japan.1006.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "votp_prison"
	}
	
	duration = 3
	
	immediate = {
		random_scope_state = {
			limit = { state_is_in_japan = yes }
			save_scope_as = scope_state
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1006.a
		default_option = yes

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -7.5
		}
		scope:scope_state = {
			add_radicals_in_state = {
				value = 0.05
			}
		}
	}
	option = {
		name = eafp_japan.1006.b

		add_bakuhantaisei_bakufu_authority = {
			VALUE = -50
		}
		add_modifier = {
			name = counterfeiting_continues_modifier
			months = normal_modifier_time
		}
	}
	option = {
		name = eafp_japan.1006.c

		add_bakuhantaisei_state_independency = {
			TARGET = scope:scope_state
			VALUE = -12.5
		}
		add_bakuhantaisei_state_loyalty = {
			TARGET = scope:scope_state
			VALUE = -15
		}
		scope:scope_state = {
			add_radicals_in_state = {
				value = 0.1
			}
		}
	}
}

eafp_japan.1007 = { # 국회도 작성 완료
	type = country_event
	placement = ROOT

	title = eafp_japan.1007.t
	desc = eafp_japan.1007.d
	flavor = eafp_japan.1007.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1007.a
		default_option = yes

		add_modifier = {
			name = tenpo_kuniezu_modifier
			months = long_modifier_time
			is_decaying = yes
		}
		every_scope_state = {
			limit = { state_is_in_japan = yes }
			add_bakuhantaisei_state_independency = {
				TARGET = THIS
				VALUE = -10
			}
		}
	}
}

eafp_japan.1008 = { # 상황의 붕어
	type = country_event
	placement = ROOT

	title = eafp_japan.1008.t
	desc = eafp_japan.1008.d
	flavor = eafp_japan.1008.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {

	}

	trigger = {}
	
	option = {
		name = eafp_japan.1008.a
		default_option = yes

	}
}

eafp_japan.1009 = { # 고도칸 개설
	type = country_event
	placement = ROOT

	title = eafp_japan.1009.t
	desc = eafp_japan.1009.d
	flavor = eafp_japan.1009.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1009.a
		default_option = yes

		add_modifier = {
			name = mitogaku_modifier
			months = long_modifier_time
			is_decaying = yes
		}
	}
}

eafp_japan.1010 = { # (고메이) 천황의 즉위
	type = country_event
	placement = ROOT

	title = eafp_japan.1010.t
	desc = eafp_japan.1010.d
	flavor = eafp_japan.1010.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		if = {
			limit = { ruler = { has_template = eafp_jap_ninko_template } }
			ruler = { save_scope_as = ninko_scope }
			heir = { save_scope_as = komei_scope }
			scope:komei_scope = {
				set_character_as_ruler = yes
			}
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.1010.a
		default_option = yes

		trigger = {
			exists = scope:ninko_scope
		}
		show_as_tooltip = {
			scope:komei_scope = {
				set_character_as_ruler = yes
			}
		}
	}

	option = {
		name = eafp_japan.1010.a
		default_option = yes

		trigger = {
			NOT = { exists = scope:ninko_scope }
		}
	}
}




eafp_japan.2001 = { # 모리슨 호
	type = country_event
	placement = root

	title = eafp_japan.2001.t
	desc = eafp_japan.2001.d
	flavor = eafp_japan.2001.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		trigger_event = {
			id = eafp_japan.2003
			months = 12
		}
	}

	trigger = {
	}
	
	option = {
		name = eafp_japan.2001.a

		default_option = yes

	}
}

eafp_japan.2002 = { # 양위
	type = country_event
	placement = root

	title = eafp_japan.2002.t
	desc = eafp_japan.2002.d
	flavor = eafp_japan.2002.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		heir = {
			save_scope_as = ieyoshi_character
		}
		add_journal_entry = {
			type = je_bakufu_kaikaku
		}
	}

	trigger = {}
	
	option = {
		default_option = yes
		name = eafp_japan.2002.a
		scope:ieyoshi_character = {
			set_character_as_ruler = yes
		}
		hidden_effect = {
			create_character = {
				template = eafp_jap_tokugawa_iesada_template
				heir = yes
				on_created = {
					set_character_busy_and_immortal = yes
				}
			}
		}
		show_as_tooltip = {
			add_journal_entry = {
				type = je_bakufu_kaikaku
			}
		}
	}
}

eafp_japan.2003 = { # 모리슨 호
	type = country_event
	placement = root

	title = eafp_japan.2003.t
	desc = eafp_japan.2003.d
	flavor = eafp_japan.2003.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
	}

	trigger = {
	}
	
	option = {
		name = eafp_japan.2003.a

		default_option = yes
		
		add_hitotsubashiha_var = {
			VALUE = 10
		}
		add_hitotsubashiha_approval = {
			VALUE = -10
		}
	}
}

eafp_japan.2004 = { # 오고쇼의 서거
	type = country_event
	placement = root

	title = eafp_japan.2004.t
	desc = eafp_japan.2004.d
	flavor = eafp_japan.2004.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		ruler = {
			save_scope_as = ieyoshi_character
		}
	}

	trigger = {}
	
	option = {
		default_option = yes
		name = eafp_japan.2004.a
		add_hitotsubashiha_var = {
			VALUE = 10
		}
	}
}

eafp_japan.2005 = { # 이에사다의 즉위 용 히든 이벤트
	type = country_event
	hidden = yes

	immediate = {
		ruler = {
			kill_character = yes
		}
	}
}

eafp_japan.2006 = { # 이에사다의 즉위
	type = country_event
	placement = root

	title = eafp_japan.2006.t
	desc = eafp_japan.2006.d
	flavor = eafp_japan.2006.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:iesada_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	trigger = {
		#Fired by on_action
	}

	immediate = {
		
	}

	option = {
		name = eafp_japan.2006.a
		default_option = yes
		show_as_tooltip = {
			scope:iesada_scope = {
				set_character_as_ruler = yes
			}
		}
	}
}

eafp_japan.2007 = {	# 아편전쟁 패배 소식
	type = country_event
	placement = ROOT

	title = eafp_japan.2007.t
	desc = eafp_japan.2007.d
	flavor = eafp_japan.2007.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_naval_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/before_the_battle"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	trigger = {
	}

	immediate = {
	}

	option = {
		name = eafp_japan.2007.a
		
		default_option = yes

		add_hitotsubashiha_var = {
			VALUE = 20
		}

		ai_chance = {
			base = 100
		}
	}
}

# 히토츠바시 vs 난키 + 즉위 이벤트

eafp_japan.2101 = { # 일엽지추 1853년 1월 1일
	type = country_event
	placement = root

	title = eafp_japan.2101.t
	desc = eafp_japan.2101.d
	flavor = eafp_japan.2101.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		ruler = {
			save_scope_as = ieyoshi_character
		}
		heir = {
			save_scope_as = iesada_character
		}
		hitotsubashiha_vs_nankiha_start_effect = yes
		trigger_event = {
			id = eafp_japan.2102
			years = 5
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.2101.a
		default_option = yes
		custom_tooltip = {
			text = hitotsubashiha_vs_nankiha_start_effect.tt
		}
		ai_chance = {
			base = 100
		}
	}
}

eafp_japan.2102 = { # 후계자 결정 1858년 1월 1일
	type = country_event
	placement = root

	title = eafp_japan.2102.t
	desc = eafp_japan.2102.d
	flavor = eafp_japan.2102.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {
		ruler = {
			save_scope_as = ieyoshi_character
		}
		heir = {
			save_scope_as = iesada_character
		}
	}

	trigger = {}
	
	option = {
		name = eafp_japan.2102.a
		custom_tooltip = {
			text = eafp_japan.2102.tta
			set_variable = shogun_support_hitotsubashiha
		}
		ai_chance = {
			base = 0
		}
	}

	option = {
		name = eafp_japan.2102.b
		default_option = yes
		custom_tooltip = {
			text = eafp_japan.2102.ttb
			set_variable = shogun_support_nankiha
		}
		ai_chance = {
			base = 100
		}
	}
}

eafp_japan.2103 = {  # 이에모치 or 요시노부 즉위 용 히든 이벤트
	hidden = yes
	immediate = {
		ruler = {
			kill_character = yes
		}
	}
}

eafp_japan.2104 = { # 이에모치의 즉위
	type = country_event
	placement = root

	title = eafp_japan.2104.t
	desc = eafp_japan.2104.d
	flavor = eafp_japan.2104.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:iemochi_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	trigger = {
		#Fired by on_action
	}

	immediate = {
		
	}

	option = {
		name = eafp_japan.2104.a
		default_option = yes
		show_as_tooltip = {
			scope:iemochi_scope = {
				set_character_as_ruler = yes
			}
		}
		hidden_effect = {
			if = {
				limit = { has_variable = shogun_support_hitotsubashiha }
				trigger_event = { id = eafp_japan.2106 days = { 30 60 } }
			}
			else = {
				remove_variable = shogun_support_nankiha
			}
		}
	}
}

eafp_japan.2105 = { # 요시노부의 즉위
	type = country_event
	placement = root

	title = eafp_japan.2105.t
	desc = eafp_japan.2105.d
	flavor = eafp_japan.2105.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:yoshinobu_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	trigger = {
		#Fired by on_action
	}

	immediate = {
		
	}

	option = {
		name = eafp_japan.2105.a
		default_option = yes
		show_as_tooltip = {
			scope:yoshinobu_scope = {
				set_character_as_ruler = yes
			}
		}
		hidden_effect = {
			if = {
				limit = { has_variable = shogun_support_nankiha }
				trigger_event = { id = eafp_japan.2106 days = { 30 60 } }
			}
			else = {
				remove_variable = shogun_support_hitotsubashiha
			}
		}
	}
}

eafp_japan.2106 = { # 쇼군의 뜻대로 후계가 세워지지 않음
	type = country_event
	placement = root

	title = eafp_japan.2106.t
	desc = eafp_japan.2106.d
	flavor = eafp_japan.2106.f

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	trigger = {
		
	}

	immediate = {
		
	}

	option = {
		name = eafp_japan.2106.a
		default_option = yes
		add_bakuhantaisei_bakufu_authority = {
			VALUE = -200
		}
	}

	after = {
		if = {
			limit = { has_variable = shogun_support_nankiha }
			remove_variable = shogun_support_nankiha
		}
		else = {
			remove_variable = shogun_support_hitotsubashiha
		}
	}
}

#

eafp_japan.2181 = { # 히토츠바시파 정치인 암살
	type = country_event
	placement = root

	title = eafp_japan.2181.t
	desc = eafp_japan.2181.d
	flavor = eafp_japan.2181.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto" # TODO
	}

	duration = 3

	trigger = {
	}

	immediate = {
		ordered_scope_character = {
			limit = {
				has_variable = eafp_bakuhantaisei_politician_influence
				is_hitotsubashiha = yes
			}
			order_by = {
				value = bakufu_kaikaku_bakufu_politicians_activeness
				multiply = 1500 # TODO
				add = var:eafp_bakuhantaisei_politician_influence_max
			}
			save_scope_as = target_character
			kill_character = yes
		}
	}

	option = {
		name = eafp_japan.2181.a
		default_option = yes
		show_as_tooltip = {
			scope:target_character = {
				kill_character = yes
			}
		}
	}
}

eafp_japan.2182 = { # 난키파 정치인 암살
	type = country_event
	placement = root

	title = eafp_japan.2182.t
	desc = eafp_japan.2182.d
	flavor = eafp_japan.2182.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto" # TODO
	}

	duration = 3

	trigger = {
	}

	immediate = {
		ordered_scope_character = {
			limit = {
				has_variable = eafp_bakuhantaisei_politician_influence
				is_nankiha = yes
			}
			order_by = {
				value = bakufu_kaikaku_bakufu_politicians_activeness
				multiply = 1500 # TODO
				add = var:eafp_bakuhantaisei_politician_influence_max
			}
			save_scope_as = target_character
			kill_character = yes
		}
	}

	option = {
		name = eafp_japan.2182.a
		default_option = yes
		show_as_tooltip = {
			scope:target_character = {
				kill_character = yes
			}
		}
	}
}

# TODO 사임 강요 요구, 타협으로 중도파 등용, 낭인의 서양인 습격 등.

# 막부 정책
# 새 화폐 도입
eafp_japan.2201 = { # 안정된 새 화폐
	type = country_event
	placement = root

	title = eafp_japan.2201.t
	desc = eafp_japan.2201.d
	flavor = eafp_japan.2201.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		add_modifier = {
			name = bakufu_seisaku_new_currency_complete_modifier
			months = long_modifier_time
		}
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			add_bakuhantaisei_state_loyalty = {
				TARGET = s:STATE_KANTO.region_state:JAP
				VALUE = 5
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			add_bakuhantaisei_state_loyalty = {
				TARGET = s:STATE_KANSAI.region_state:JAP
				VALUE = 5
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = 100
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2201.a
		
		show_as_tooltip = {
			add_modifier = {
				name = bakufu_seisaku_new_currency_complete_modifier
				months = long_modifier_time
			}
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				add_bakuhantaisei_state_loyalty = {
					TARGET = s:STATE_KANTO.region_state:JAP
					VALUE = 5
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				add_bakuhantaisei_state_loyalty = {
					TARGET = s:STATE_KANSAI.region_state:JAP
					VALUE = 5
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = 100
			}
		}
	}
}

eafp_japan.2202 = { # 화폐 혼란
	type = country_event
	placement = root

	title = eafp_japan.2202.t
	desc = eafp_japan.2202.d
	flavor = eafp_japan.2202.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		add_modifier = {
			name = bakufu_seisaku_new_currency_fail_modifier
			months = long_modifier_time
		}
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			add_bakuhantaisei_state_loyalty = {
				TARGET = s:STATE_KANTO.region_state:JAP
				VALUE = -15
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			add_bakuhantaisei_state_loyalty = {
				TARGET = s:STATE_KANSAI.region_state:JAP
				VALUE = -15
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = -100
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2202.a
		
		show_as_tooltip = {
			add_modifier = {
				name = bakufu_seisaku_new_currency_fail_modifier
				months = long_modifier_time
			}
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				add_bakuhantaisei_state_loyalty = {
					TARGET = s:STATE_KANTO.region_state:JAP
					VALUE = -15
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				add_bakuhantaisei_state_loyalty = {
					TARGET = s:STATE_KANSAI.region_state:JAP
					VALUE = -15
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = -100
			}
		}
	}
}

eafp_japan.2203 = { # 광맥 발견
	type = country_event
	placement = root

	title = eafp_japan.2203.t
	desc = eafp_japan.2203.d
	flavor = eafp_japan.2203.f

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = {
		video = "europenorthamerica_gold_prospectors"
	}

	duration = 3

	trigger = {
		any_scope_state = {
			OR = {
				state_region = s:STATE_CHUBU
				state_region = s:STATE_CHUGOKU
			}
			is_incorporated = yes
			NOT = {
				state_region = {
					remaining_undepleted = {
						type = bg_gold_fields
						amount >= 1
					}
				}
			}
			has_potential_resource = bg_gold_fields
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_CHUBU
					state_region = s:STATE_CHUGOKU
				}
				is_incorporated = yes
				NOT = {
					state_region = {
						remaining_undepleted = {
							type = bg_gold_fields
							amount >= 1
						}
					}
				}
				has_potential_resource = bg_gold_fields
			}
			save_scope_as = gold_state
		}
		scope:gold_state = {
			force_resource_discovery = bg_gold_fields
		}
		remove_modifier = exploring_for_ore_modifier
	}

	option = {
		name = eafp_japan.2203.a
		
		default_option = yes

		show_as_tooltip = {
			scope:gold_state = {
				force_resource_discovery = bg_gold_fields
			}
			remove_modifier = exploring_for_ore_modifier
		}

		ai_chance = {
			base = 1
		}
	}
}
# 중농치수
eafp_japan.2211 = { # 에도에서 내려가
	type = country_event
	placement = root

	title = eafp_japan.2211.t
	desc = eafp_japan.2211.d
	flavor = eafp_japan.2211.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		add_modifier = {
			name = bakufu_seisaku_junochisui_complete_modifier
			months = long_modifier_time
		}
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			add_bakuhantaisei_state_independency = {
				TARGET = s:STATE_KANTO.region_state:JAP
				VALUE = -10
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			add_bakuhantaisei_state_independency = {
				TARGET = s:STATE_KANSAI.region_state:JAP
				VALUE = -10
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = 100
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2211.a
		
		show_as_tooltip = {
			add_modifier = {
				name = bakufu_seisaku_junochisui_complete_modifier
				months = long_modifier_time
			}
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				add_bakuhantaisei_state_independency = {
					TARGET = s:STATE_KANTO.region_state:JAP
					VALUE = -10
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				add_bakuhantaisei_state_independency = {
					TARGET = s:STATE_KANSAI.region_state:JAP
					VALUE = -10
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = 100
			}
		}
	}
}

eafp_japan.2212 = { # 
	type = country_event
	placement = root

	title = eafp_japan.2212.t
	desc = eafp_japan.2212.d
	flavor = eafp_japan.2212.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			add_bakuhantaisei_state_independency = {
				TARGET = s:STATE_KANTO.region_state:JAP
				VALUE = 10
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			add_bakuhantaisei_state_independency = {
				TARGET = s:STATE_KANSAI.region_state:JAP
				VALUE = 10
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = -100
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2212.a
		
		show_as_tooltip = {
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				add_bakuhantaisei_state_independency = {
					TARGET = s:STATE_KANTO.region_state:JAP
					VALUE = 10
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				add_bakuhantaisei_state_independency = {
					TARGET = s:STATE_KANSAI.region_state:JAP
					VALUE = 10
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = -100
			}
		}
	}
}

eafp_japan.2213 = { # 늪지 개간
	type = country_event
	placement = scope:land_reclamation_state

	title = eafp_japan.2213.t
	desc = eafp_japan.2213.d
	flavor = eafp_japan.2213.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		random_scope_state = {
			limit = {
				state_is_in_japan = yes
			}
		}
		scope:land_reclamation_state = {
			state_region = {
				add_arable_land = 2
			}
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2213.a
		
		show_as_tooltip = {
			scope:land_reclamation_state = {
				state_region = {
					add_arable_land = 2
				}
			}
		}
	}
}
# 상지령
eafp_japan.2221 = {
	type = country_event
	placement = root

	title = eafp_japan.2221.t
	desc = eafp_japan.2221.d
	flavor = eafp_japan.2221.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		add_modifier = {
			name = bakufu_seisaku_junochisui_complete_modifier
			months = long_modifier_time
		}
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			add_bakuhantaisei_state_independency = {
				TARGET = s:STATE_KANTO.region_state:JAP
				VALUE = -15
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			add_bakuhantaisei_state_independency = {
				TARGET = s:STATE_KANSAI.region_state:JAP
				VALUE = -15
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = 150
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2221.a
		
		show_as_tooltip = {
			add_modifier = {
				name = bakufu_seisaku_junochisui_complete_modifier
				months = long_modifier_time
			}
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				add_bakuhantaisei_state_independency = {
					TARGET = s:STATE_KANTO.region_state:JAP
					VALUE = -15
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				add_bakuhantaisei_state_independency = {
					TARGET = s:STATE_KANSAI.region_state:JAP
					VALUE = -15
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = 150
			}
		}
	}
}

eafp_japan.2222 = {
	type = country_event
	placement = root

	title = eafp_japan.2222.t
	desc = eafp_japan.2222.d
	flavor = eafp_japan.2222.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			add_bakuhantaisei_state_loyalty = {
				TARGET = s:STATE_KANTO.region_state:JAP
				VALUE = -15
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			add_bakuhantaisei_state_loyalty = {
				TARGET = s:STATE_KANSAI.region_state:JAP
				VALUE = -15
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = -150
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2222.a
		
		show_as_tooltip = {
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				add_bakuhantaisei_state_loyalty = {
					TARGET = s:STATE_KANTO.region_state:JAP
					VALUE = -15
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				add_bakuhantaisei_state_loyalty = {
					TARGET = s:STATE_KANSAI.region_state:JAP
					VALUE = -15
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = -150
			}
		}
	}
}
# 강기숙정
eafp_japan.2231 = {
	type = country_event
	placement = root

	title = eafp_japan.2231.t
	desc = eafp_japan.2231.d
	flavor = eafp_japan.2231.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			s:STATE_KANTO.region_state:JAP = {
				add_loyalists_in_state = {
					value = medium_radicals
				}
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			s:STATE_KANSAI.region_state:JAP = {
				add_loyalists_in_state = {
					value = medium_radicals
				}
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = 100
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2231.a
		
		show_as_tooltip = {
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				s:STATE_KANTO.region_state:JAP = {
					add_loyalists_in_state = {
						value = medium_radicals
					}
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				s:STATE_KANSAI.region_state:JAP = {
					add_loyalists_in_state = {
						value = medium_radicals
					}
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = 100
			}
		}
	}
}

eafp_japan.2232 = {
	type = country_event
	placement = root

	title = eafp_japan.2232.t
	desc = eafp_japan.2232.d
	flavor = eafp_japan.2232.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_farmers_market"
	}

	duration = 3

	immediate = {
		if = {
			limit = { exists = s:STATE_KANTO.region_state:JAP }
			s:STATE_KANTO.region_state:JAP = {
				add_radicals_in_state = {
					value = medium_radicals
				}
			}
		}
		if = {
			limit = { exists = s:STATE_KANSAI.region_state:JAP }
			s:STATE_KANSAI.region_state:JAP = {
				add_radicals_in_state = {
					value = medium_radicals
				}
			}
		}
		add_bakuhantaisei_bakufu_authority = {
			VALUE = -100
		}
	}

	trigger = {}

	option = {
		default_option = yes
		name = eafp_japan.2232.a
		
		show_as_tooltip = {
			if = {
				limit = { exists = s:STATE_KANTO.region_state:JAP }
				s:STATE_KANTO.region_state:JAP = {
					add_radicals_in_state = {
						value = medium_radicals
					}
				}
			}
			if = {
				limit = { exists = s:STATE_KANSAI.region_state:JAP }
				s:STATE_KANSAI.region_state:JAP = {
					add_radicals_in_state = {
						value = medium_radicals
					}
				}
			}
			add_bakuhantaisei_bakufu_authority = {
				VALUE = -100
			}
		}
	}
}

# 파벌 탄원
eafp_japan.2301 = { # 히토츠바시파의 이국선타불령 부활 요구
	type = country_event
	placement = root

	title = eafp_japan.2301.t
	desc = eafp_japan.2301.d
	flavor = eafp_japan.2301.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		has_law = law_type:law_isolationism
		NOT = { has_modifier = ikokusen_uchiharairei_modifier }
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_hitotsubashiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = eafpjap2301_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2301_cooldown
			value = yes
			months = normal_modifier_time
		}
		
		set_variable = eafpjap2301_ing # '이국선타불령 부활' 버튼 잠깐 막는 용
	}

	option = { # ㅇㅇ
		name = eafp_japan.2301.a
		add_hitotsubashiha_approval = {
			VALUE = 10
		}
		add_modifier = ikokusen_uchiharairei_modifier
		add_modifier = {
			name = modifier_successfully_met_petition_legitimacy
			months = long_modifier_time
			is_decaying = yes
			multiplier = {
				value = bakufu_hitotsubashiha_hiritsu
				divide = 50
			}
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2301.b
		default_option = yes
		add_hitotsubashiha_approval = {
			VALUE = -10
		}
	}

	after = {
		remove_variable = eafpjap2301_ing
	}
}

eafp_japan.2302 = { # 난키파의 막부 개혁 시행 요구 - 새 화폐 도입
	type = country_event
	placement = root

	title = eafp_japan.2302.t
	desc = eafp_japan.2302.d
	flavor = eafp_japan.2302.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_nankiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = je_bakufu_seisaku_new_currency_start }
		NOT = { has_variable = eafpjap2302_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2302_cooldown
			months = normal_modifier_time
		}
	}

	option = { # ㅇㅇ
		name = eafp_japan.2302.a
		add_journal_entry = {
			type = je_bakufu_seisaku_new_currency_petition
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2302.b
		default_option = yes
		add_nankiha_approval = {
			VALUE = -10
		}
	}
}

eafp_japan.2303 = { # 난키파의 막부 개혁 시행 요구 - 중농치수
	type = country_event
	placement = root

	title = eafp_japan.2303.t
	desc = eafp_japan.2303.d
	flavor = eafp_japan.2303.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_nankiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = je_bakufu_seisaku_junochisui_start }
		NOT = { has_variable = eafpjap2303_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2303_cooldown
			months = normal_modifier_time
		}
	}

	option = { # ㅇㅇ
		name = eafp_japan.2303.a
		add_journal_entry = {
			type = je_bakufu_seisaku_junochisui_petition
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2303.b
		default_option = yes
		add_nankiha_approval = {
			VALUE = -10
		}
	}
}

eafp_japan.2304 = { # 난키파의 막부 개혁 시행 요구 - 상지령
	type = country_event
	placement = root

	title = eafp_japan.2304.t
	desc = eafp_japan.2304.d
	flavor = eafp_japan.2304.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_nankiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = je_bakufu_seisaku_agechirei_start }
		NOT = { has_variable = eafpjap2304_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2304_cooldown
			months = normal_modifier_time
		}
	}

	option = { # ㅇㅇ
		name = eafp_japan.2304.a
		add_journal_entry = {
			type = je_bakufu_seisaku_agechirei_petition
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2304.b
		default_option = yes
		add_nankiha_approval = {
			VALUE = -10
		}
	}
}

eafp_japan.2305 = { # 난키파의 막부 개혁 시행 요구 - 강기숙정
	type = country_event
	placement = root

	title = eafp_japan.2305.t
	desc = eafp_japan.2305.d
	flavor = eafp_japan.2305.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_nankiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = je_bakufu_seisaku_kokishukusei_start }
		NOT = { has_variable = eafpjap2305_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2305_cooldown
			months = normal_modifier_time
		}
	}

	option = { # ㅇㅇ
		name = eafp_japan.2305.a
		add_journal_entry = {
			type = je_bakufu_seisaku_kokishukusei_petition
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2305.b
		default_option = yes
		add_nankiha_approval = {
			VALUE = -10
		}
	}
}

eafp_japan.2306 = { # 난키파의 이국선타불령 폐지 요구
	type = country_event
	placement = root

	title = eafp_japan.2306.t
	desc = eafp_japan.2306.d
	flavor = eafp_japan.2306.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		has_law = law_type:law_isolationism
		has_modifier = ikokusen_uchiharairei_modifier
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_nankiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = eafpjap2306_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2306_cooldown
			value = yes
			months = normal_modifier_time
		}
		
		set_variable = eafpjap2306_ing # '이국선타불령 폐지' 버튼 잠깐 막는 용
	}

	option = { # ㅇㅇ
		name = eafp_japan.2306.a
		add_nankiha_approval = {
			VALUE = 10
		}
		remove_modifier = ikokusen_uchiharairei_modifier
		add_modifier = {
			name = modifier_successfully_met_petition_legitimacy
			months = long_modifier_time
			is_decaying = yes
			multiplier = {
				value = bakufu_nankiha_hiritsu
				divide = 50
			}
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2306.b
		default_option = yes
		add_nankiha_approval = {
			VALUE = -10
		}
	}

	after = {
		remove_variable = eafpjap2306_ing
	}
}

eafp_japan.2307 = { # 히토츠바시파의 정략결혼 요구 TODO
	type = country_event
	placement = root

	title = eafp_japan.2307.t
	desc = eafp_japan.2307.d
	flavor = eafp_japan.2307.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_hitotsubashiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = eafpjap2307_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2307_cooldown
			value = yes
			months = normal_modifier_time
		}
		
		set_variable = eafpjap2307_ing # 버튼 잠깐 막는 용
	}

	option = { # ㅇㅇ
		name = eafp_japan.2307.a
		add_hitotsubashiha_approval = {
			VALUE = 10
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2307.b
		default_option = yes
		add_hitotsubashiha_approval = {
			VALUE = -10
		}
	}

	after = {
		remove_variable = eafpjap2307_ing
	}
}

eafp_japan.2308 = { # 히토츠바시파의 교토 상경 요구 TODO
	type = country_event
	placement = root

	title = eafp_japan.2308.t
	desc = eafp_japan.2308.d
	flavor = eafp_japan.2308.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_hitotsubashiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = eafpjap2308_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2308_cooldown
			value = yes
			months = normal_modifier_time
		}
		
		set_variable = eafpjap2308_ing # 버튼 잠깐 막는 용
	}

	option = { # ㅇㅇ
		name = eafp_japan.2308.a
		add_hitotsubashiha_approval = {
			VALUE = 10
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2308.b
		default_option = yes
		add_hitotsubashiha_approval = {
			VALUE = -10
		}
	}

	after = {
		remove_variable = eafpjap2308_ing
	}
}

eafp_japan.2309 = { # 히토츠바시파의 양이 요구 TODO
	type = country_event
	placement = root

	title = eafp_japan.2309.t
	desc = eafp_japan.2309.d
	flavor = eafp_japan.2309.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}

	duration = 3

	trigger = {
		#je:je_bakufu_kaikaku = { "scripted_bar_progress(bakufu_kaikaku_hitotsubashiha_approval_progress_bar)" <= 25 }
		NOT = { has_variable = eafpjap2309_cooldown }
	}

	immediate = {
		set_variable = {
			name = eafpjap2309_cooldown
			value = yes
			months = normal_modifier_time
		}
		
		set_variable = eafpjap2309_ing # 버튼 잠깐 막는 용
	}

	option = { # ㅇㅇ
		name = eafp_japan.2309.a
		add_hitotsubashiha_approval = {
			VALUE = 10
		}
	}

	option = { # ㄴㄴ
		name = eafp_japan.2309.b
		default_option = yes
		add_hitotsubashiha_approval = {
			VALUE = -10
		}
	}

	after = {
		remove_variable = eafpjap2309_ing
	}
}

## 900 ~ 연도 트리거

eafp_japan.902 = { # 1838 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.903
			years = 1
		}
		trigger_event = { #弘道館記 발간
			id = eafp_japan.3001
			months = 5
		}
	}
}

eafp_japan.903 = { # 1839 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.904
			years = 1
		}
	}
}

eafp_japan.904 = { # 1840 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.905
			years = 1
		}
		trigger_event = { #고카쿠덴노 사망
			id = eafp_japan.1006
			months = 11
		}
	}
}

eafp_japan.905 = { # 1841 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.906
			years = 1
		}
		trigger_event = { #만지로 표류
			id = eafp_japan.1007
			months = 1
		}
	}
}

eafp_japan.906 = { # 1842 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.907
			years = 1
		}
	}
}

eafp_japan.907 = { # 1843 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.908
			years = 1
		}
	}
}

eafp_japan.908 = { # 1844 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.909
			years = 1
		}
		trigger_event = { #네덜란드 1차 친서
			id = eafp_japan.4008
			months = 4
		}
	}
}

eafp_japan.909 = { # 1845 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.910
			years = 1
		}
	}
}

eafp_japan.910 = { # 1846 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.911
			years = 1
		}
		trigger_event = { #닌코 사망
				id = eafp_japan.1008
				days = 40
		}
	}
}

eafp_japan.911 = { # 1847 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.912
			years = 1
		}
		trigger_event = { #요시노부 고산쿄 후계자 임명
			id = eafp_japan.3000
			months = 3
		}
	}
}

eafp_japan.912 = { # 1848 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.913
			years = 1
		}
	}
}

eafp_japan.913 = { # 1849 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.914
			years = 1
		}
	}
}

eafp_japan.914 = { # 1850 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.915
			years = 1
		}
	}
}

eafp_japan.915 = { # 1851 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.916
			years = 1
		}
	}
}

eafp_japan.916 = { # 1852 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = {
			id = eafp_japan.917
			years = 1
		}
		trigger_event = { #네덜란드 국왕 친서 -> 페리 내항 정보
			id = eafp_japan.4000
			months = 8
		}
		trigger_event = { #메이지 탄생
			id = eafp_japan.1010
			months = 11
		}
	}
}

eafp_japan.917 = { # 1853 이벤트 트리거
	type = country_event
	hidden = yes

	trigger = {}

	immediate = {
		trigger_event = { #페리 오키나와 내항
			id = eafp_japan.5000
			months = 5
		}
		trigger_event = { #페리 내항
			id = eafp_japan.5001
			months = 7
		}
		trigger_event = { #러시아 내항
			id = eafp_japan.5002
			months = 8
		}
	}
}
		



	


eafp_japan.4000 = { #개항 알림
	type = country_event
	placement = root

	title = eafp_japan.4000.t
	desc = eafp_japan.4000.d
	flavor = eafp_japan.4000.f

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = { 
		video = "asia_confucianism_shinto"
	}
	
	duration = 3
	
	immediate = {}

	trigger = {}
	
	option = {
		default_option = yes
		name = eafp_japan.4000.a
		add_journal_entry = {
			type = japan_kaikou_je
		}
	}
}

eafp_japan.4001 = { # 류큐의 개항
	type = country_event
	placement = root
	title = eafp_japan.4001.t
	desc = eafp_japan.4001.d
	flavor = eafp_japan.4001.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	icon = "gfx/interface/icons/event_icons/event_default.dds"
	
	event_image = {
		video = "asia_westerners_arriving"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
	}

	option = {
		name = eafp_japan.4001.a
	}
}

eafp_japan.4002 = { # 천황의 밀칙
	type = country_event
	placement = root
	title = eafp_japan.4002.t
	desc = eafp_japan.4002.d
	flavor = eafp_japan.4002.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "asia_confucianism_shinto"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
	}

	immediate = {
	}

	option = {
		name = eafp_japan.4002.a
	}
}

# 자유민권 파트(제작 중)
namespace = jap_demo_start_event

JAP_demo_min_event = {
	type = country_event
	placement = root

	title = JAP_demo_min.t
	desc = JAP_demo_min.d
	flavor = JAP_demo_min.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
		year >= 1874
	}

	immediate = {
		set_variable = JAP_demo_min_var
	}

	option = {
		name = JAP_demo_min.a
		default_option = yes
		trigger_event = {
			id = JAP_demo_min_success_event
			# 건백서 수용(A-1)
			days = 20
		}
	}

	option = {
		name = JAP_demo_min.b
		trigger_event = {
			id = JAP_demo_min_fail_event
			# 건백서 불허(B-1)
			days = 20
		}
	}
}

namespace = jap_demo_min_event

# 빠른 개혁(비정사) 루트
JAP_demo_min_success_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_success.t
	desc = JAP_demo_min_success.d
	flavor = JAP_demo_min_success.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_success_var
	}

	option = {
		name = JAP_demo_min_success.a
		default_option = yes
		trigger_event = {
			id = JAP_demo_min_as_event
			days = 60
		}
	}

	option = {
		name = JAP_demo_min_success.b
		trigger_event = {
			id = JAP_demo_min_af_event
			days = 60
		}
	}
}

JAP_demo_min_as_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_as.t
	desc = JAP_demo_min_as.d
	flavor = JAP_demo_min_as.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_as_var
	}

	option = {
		name = JAP_demo_min_as.a
		default_option = yes
		trigger_event = {
			id = JAP_demo_min_asa_event
			days = 120
		}
	}

	option = {
		name = JAP_demo_min_as.b
		trigger_event = {
			id = JAP_demo_min_asb_event
			days = 60
		}
	}
}

JAP_demo_min_af_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_af.t
	desc = JAP_demo_min_af.d
	flavor = JAP_demo_min_af.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_af_var
	}

	option = {
		name = JAP_demo_min_af.a
		default_option = yes
		trigger_event = {
			id = JAP_demo_min_afa_event
			# 미완성
			days = 60
		}
	}

	option = {
		name = JAP_demo_min_af.b
		trigger_event = {
			id = JAP_demo_min_afb_event
			# 미완성
			days = 60
		}
	}
}

JAP_demo_min_asa_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_asa.t
	desc = JAP_demo_min_asa.d
	flavor = JAP_demo_min_asa.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_asa_var
	}

	option = {
		name = JAP_demo_min_asa.a
		default_option = yes
	}
}

JAP_demo_min_asb_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_asb.t
	desc = JAP_demo_min_asb.d
	flavor = JAP_demo_min_asb.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_asb_var
	}

	option = {
		name = JAP_demo_min_asb.a
		default_option = yes
	}
}

# 정사(비정사 포함) 루트
JAP_demo_min_fail_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_fail.t
	desc = JAP_demo_min_fail.d
	flavor = JAP_demo_min_fail.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_fail_var
	}

	option = {
		name = JAP_demo_min_fail.a
		default_option = yes
		trigger_event = {
			id = JAP_demo_min_bs_event
			days = 60
		}
	}

	option = {
		name = JAP_demo_min_fail.b
		trigger_event = {
			id = JAP_demo_min_bf_event
			days = 60
		}
	}
}

JAP_demo_min_his_event = {
	type = country_event
	placement = root

	title = JAP_demo_min_his.t
	desc = JAP_demo_min_his.d
	flavor = JAP_demo_min_his.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	duration = 3

	trigger = {
		exists = c:JAP
		this = c:JAP
	}

	immediate = {
		set_variable = JAP_demo_min_his_var
	}

	option = {
		name = JAP_demo_min_his.a
		default_option = yes
		# 이후 정사 루트 미정
	}
}
