je_korea_tutorial = { #튜토리얼
    icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

    is_shown_when_inactive = {
        NOT = { has_variable = kor_tutorial_skip }
        c:KOR = THIS
    }

    possible = {
        c:KOR = THIS
    }

    immediate = { set_variable = { name = kor_tutorial_var value = 0 } }

    complete = { 
        scope:journal_entry = {
			is_goal_complete = yes
		}
    }

    on_complete = { set_variable = kor_tutorial_skip }

    scripted_button = kor_tutorial_button

    on_weekly_pulse = {
        effect = {
            change_variable = {
                name = kor_tutorial_var
                add = 5
            }
        }
    }

    current_value = {
		value = root.var:kor_tutorial_var
	}	

	goal_add_value = {
		value = 30
	}

    progressbar = yes
    weight = 12000

    should_be_pinned_by_default = yes
}

je_korea_history = { #세도정치의 심화
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"
 
    immediate = {
        set_variable = korea_ui_on #전용 UI 활성화
        set_variable = sedo_power_ui_on #세도가 영향력 UI 활성화
        set_variable = {
            name = heonjong_health
            value = 103
        }
        add_modifier = sedo_problem
        trigger_event = {
            id = korea_main.1000
            days = 97
        }
        trigger_event = {
            id = korea_main.1011
            months = 16
        }
        trigger_event = {
            id = korea_main.1018
            years = 5
        }
    }

    complete = {
        custom_tooltip = {
            text = je_korea_history_custom_tt
            joseon_royal_authority >= 50
            sedo_kim_value <= 30
            sedo_jo_value <= 30
            sedo_park_value <= 30
            sedo_power_value <= 70
        }
        NOT = { has_variable = bibyunsa_enable } #비변사 활성화 변수
    }
    
    on_complete = { # 이벤트 설정해야함
        trigger_event = korea_main.100
    }

    on_yearly_pulse = {
		random_events = {
            15 = 0
            1 = korea_main.1001 # 조 vs 김
            1 = korea_main.1002 # 왕권
            1 = korea_main.1003 # 조 vs 김
            1 = korea_main.1004 # 박
            1 = korea_main.1005 # 왕권
            1 = korea_main.1006 # 조 vs 김
            1 = korea_main.1007 # 조 vs 김
            10 = korea_main.1008 #세력 균형 - 김
            10 = korea_main.1009 #세력 균형 - 조
            10 = korea_main.1010 #세력 균형 - 박
        }
    }

    weight = 10000

    should_be_pinned_by_default = yes
}


je_samjeong_munran = { #세도정치의 심화
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"
 
    scripted_button = total_info_button
    scripted_button = seoul_info_button
    scripted_button = yangho_info_button
    scripted_button = busan_info_button
    scripted_button = pyongyang_info_button
    scripted_button = sariwon_info_button

    immediate = {
        set_variable = {
            name = total_info_var
        }
        set_variable = {
            name = seoul_gyeol_var
            value = 54552
        }
        set_variable = {
            name = busan_gyeol_var
            value = 207515
        }
        set_variable = {
            name = yangho_gyeol_var
            value = 320690
        }
        set_variable = {
            name = sariwon_gyeol_var
            value = 62482
        }
        set_variable = {
            name = pyongyang_gyeol_var
            value = 147103
        }
        # 수확량 (말)
        set_variable = {
            name = total_gyeol_havestment_var
            value = 600
        }
        #환곡 (말)
        set_variable = {
            name = seoul_hwangok_var
            value = 42
        }
        set_variable = {
            name = busan_hwangok_var
            value = 65
        }
        set_variable = {
            name = yangho_hwangok_var
            value = 84
        }
        set_variable = {
            name = sariwon_hwangok_var
            value = 31
        }
        set_variable = {
            name = pyongyang_hwangok_var
            value = 59
        }
        #전세 기준 (말)
        set_variable = {
            name = jeonse_var
            value = 20
        }
        #부가 전세 (말)
        set_variable = {
            name = seoul_buga_jeonse_var
            value = 100
        }
        set_variable = {
            name = busan_buga_jeonse_var
            value = 120
        }
        set_variable = {
            name = yangho_buga_jeonse_var
            value = 132
        }
        set_variable = {
            name = sariwon_buga_jeonse_var
            value = 105
        }
        set_variable = {
            name = pyongyang_buga_jeonse_var
            value = 117
        }
        #군포 (4 고정)
        set_variable = {
            name = gunpo_var
            value = 4
        }
        #생활비 (말)
        set_variable = {
            name = seoul_living_exp_var
            value = 254
        }
        set_variable = {
            name = busan_living_exp_var
            value = 260
        }
        set_variable = {
            name = yangho_living_exp_var
            value = 245
        }
        set_variable = {
            name = sariwon_living_exp_var
            value = 220
        }
        set_variable = {
            name = pyongyang_living_exp_var
            value = 251
        }
    }



    complete = {
        custom_tooltip = {
            text = je_samjeong_munran_custom_tt
            busan_total_value > 0
            seoul_total_value > 0
            sariwon_total_value > 0
            pyongyang_total_value > 0
            yangho_total_value > 0 
            game_date > 1930.1.1
        }
        
    }
    
    on_complete = { # 이벤트 설정해야함
        trigger_event = korea_main.66666
    }

    weight = 7000
}

je_heonjong_health = { #헌종 건강
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"
 
    status_desc = {
		first_valid = {
            triggered_desc = {
				desc = heonjong_die
				trigger = {
					var:heonjong_health = 0
				}
			}
			triggered_desc = {
				desc = heonjong_unhealthiest
				trigger = {
					var:heonjong_health < 5
				}
			}
			triggered_desc = {
				desc = heonjong_very_unhealthier
				trigger = {
					var:heonjong_health < 25
				}
			}
			triggered_desc = {
				desc = heonjong_unhealthier
				trigger = {
					var:heonjong_health < 50
				}
			}
            triggered_desc = {
				desc = heonjong_unhealthy
				trigger = {
					var:heonjong_health < 75
				}
			}
            triggered_desc = {
				desc = heonjong_normal
				trigger = {
					var:heonjong_health < 100
				}
			}
            triggered_desc = {
				desc = heonjong_healthy
				trigger = {
					var:heonjong_health < 125
				}
			}
            triggered_desc = {
				desc = heonjong_very_healthy
				trigger = {
					var:heonjong_health < 200
				}
			}
		}
	}

    immediate = {
        set_variable = heonjong_cure_decision_var
    }

    complete = {
        custom_tooltip = {
            text = heonjong_health_tt
            has_variable = next_king_var
        }
    }
    
    on_complete = { # 이벤트 설정해야함
        trigger_event = korea_main.66666
    }

    on_monthly_pulse = {
		effect = {
            change_variable = {
                name = heonjong_health
                subtract = 1
            }
        }
    }

    weight = 9200

    should_be_pinned_by_default = yes
}





je_korea_reformation_start = { #개혁 시작
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"

    immediate = {
        set_variable = silhak_vs_sedo_on
        trigger_event = {
            id = korea_main.1017
            years = 4
        }
    }

    complete = {
        custom_tooltip = {
            text = je_korea_reformation_start_complete_tt
            has_variable = samjeong_complete_var
        }
    }

    on_complete = { # 이벤트 설정해야함
        trigger_event = korea_main.100
    }

    fail = {
        custom_tooltip = {
            text = je_korea_reformation_start_fail_tt_1
            has_variable = not_establish_samjeong_ijeong_cheong
        }
        custom_tooltip = {
            text = je_korea_reformation_start_fail_tt_2
            joseon_royal_authority <= 0
        }
        custom_tooltip = {
            text = je_korea_reformation_start_fail_tt_3
            sedo_power_value >= 150
        }  
    }

    on_fail = { #철종 데려옴
        trigger_event = korea_main.100
    }

    invalid = {
        game_date > 1866.12.31
    }

    on_invalid = { #흐지부지된 개혁
        trigger_event = korea_main.100
    }

 weight = 9500

 should_be_pinned_by_default = yes

}

