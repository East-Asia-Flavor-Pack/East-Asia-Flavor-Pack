set_variables_taxes_modifiers_for_likin = {
	hidden_effect = {
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = ammunition }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = small_arms }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = artillery }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = tanks }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = aeroplanes }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = manowars }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = ironclads }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = grain }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = fish }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = fabric }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = wood }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = groceries }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = clothes }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = furniture }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = paper }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = services }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = transportation }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = electricity }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = clippers }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = steamers }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = silk }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = dye }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = sulfur }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = coal }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = iron }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = lead }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = hardwood }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = rubber }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = oil }	
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = engines }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = steel }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = glass }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = fertilizer }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = tools }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = explosives }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = porcelain }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = meat }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = fruit }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = liquor }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = wine }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = tea }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = coffee }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = sugar }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = tobacco }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = opium }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = automobiles }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = telephones }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = radios }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = luxury_clothes }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = luxury_furniture }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = gold }
		set_goods_delta_abs_multiply_market_price_sum = { GOODS = fine_art }
		every_scope_state = {
			limit = { state_is_in_china_proper = yes }
			add_goods_delta_abs_multiply_market_price = {
				GOODS = ammunition
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = small_arms
				BASEPRICE = 60
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = artillery
				BASEPRICE = 70
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = tanks
				BASEPRICE = 80
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = aeroplanes
				BASEPRICE = 80
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = manowars
				BASEPRICE = 70
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = ironclads
				BASEPRICE = 80
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = grain
				BASEPRICE = 20
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = fish
				BASEPRICE = 20
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = fabric
				BASEPRICE = 20
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = wood
				BASEPRICE = 20
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = groceries
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = clothes
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = furniture
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = paper
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = services
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = transportation
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = electricity
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = clippers
				BASEPRICE = 60
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = steamers
				BASEPRICE = 70
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = silk
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = dye
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = sulfur
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = coal
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = iron
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = lead
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = hardwood
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = rubber
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = oil
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = engines
				BASEPRICE = 60
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = steel
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = glass
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = fertilizer
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = tools
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = explosives
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = porcelain
				BASEPRICE = 70
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = meat
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = fruit
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = liquor
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = wine
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = tea
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = coffee
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = sugar
				BASEPRICE = 30
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = tobacco
				BASEPRICE = 40
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = opium
				BASEPRICE = 50
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = automobiles
				BASEPRICE = 100
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = telephones
				BASEPRICE = 70
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = radios
				BASEPRICE = 80
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = luxury_clothes
				BASEPRICE = 60
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = luxury_furniture
				BASEPRICE = 60
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = gold
				BASEPRICE = 100
			}
			add_goods_delta_abs_multiply_market_price = {
				GOODS = fine_art
				BASEPRICE = 200
			}
		}
		sum_goods_delta_abs_multiply_market_price_sum = yes
		remove_modifier = likin_tax_income_modifier
		set_variable = {
			name = likin_tax_income_modifier_multiplier
			value = {
				value = var:goods_delta_abs_multiply_market_price_sum
				multiply = var:likin_level_var
				multiply = 0.01
			}
		}
		add_modifier = {
			name = likin_tax_income_modifier
			multiplier = var:likin_tax_income_modifier_multiplier
		}
		remove_modifier = likin_authority_modifier
		add_modifier = {
			name = likin_authority_modifier
			multiplier = var:likin_level_var
		}
		every_state = {
			limit = { state_is_in_china_proper = yes }
			remove_modifier = likin_market_access_modifier
		}
		every_scope_state = {
			limit = { state_is_in_china_proper = yes }
			add_modifier = {
				name = likin_market_access_modifier
				multiplier = owner.var:likin_level_var
			}
		}
	}
}

set_goods_delta_abs_multiply_market_price_sum = {
	set_variable = {
		name = $GOODS$_delta_abs_multiply_market_price_sum
		value = 0
	}
}
add_goods_delta_abs_multiply_market_price = {
	owner = {
		if = {
			limit = { PREV.sg:$GOODS$.state_goods_delta >= 0 }
			change_variable = {
				name = $GOODS$_delta_abs_multiply_market_price_sum
				add = {
					value = PREV.sg:$GOODS$.state_goods_delta
					multiply = {
						value = 1
						add = market.mg:$GOODS$.market_goods_pricier
					}
					multiply = $BASEPRICE$
				}
			}
		}
		else = {
			change_variable = {
				name = $GOODS$_delta_abs_multiply_market_price_sum
				subtract = {
					value = PREV.sg:$GOODS$.state_goods_delta
					multiply = {
						value = 1
						add = market.mg:$GOODS$.market_goods_pricier
					}
					multiply = $BASEPRICE$
				}
			}
		}
	}
}
sum_goods_delta_abs_multiply_market_price_sum = {
	set_variable = {
		name = goods_delta_abs_multiply_market_price_sum
		value = {
			value = var:ammunition_delta_abs_multiply_market_price_sum
			add = var:small_arms_delta_abs_multiply_market_price_sum
			add = var:artillery_delta_abs_multiply_market_price_sum
			add = var:tanks_delta_abs_multiply_market_price_sum
			add = var:aeroplanes_delta_abs_multiply_market_price_sum
			add = var:manowars_delta_abs_multiply_market_price_sum
			add = var:ironclads_delta_abs_multiply_market_price_sum
			add = var:grain_delta_abs_multiply_market_price_sum
			add = var:fish_delta_abs_multiply_market_price_sum
			add = var:fabric_delta_abs_multiply_market_price_sum
			add = var:wood_delta_abs_multiply_market_price_sum
			add = var:groceries_delta_abs_multiply_market_price_sum
			add = var:clothes_delta_abs_multiply_market_price_sum
			add = var:furniture_delta_abs_multiply_market_price_sum
			add = var:paper_delta_abs_multiply_market_price_sum
			add = var:services_delta_abs_multiply_market_price_sum
			add = var:transportation_delta_abs_multiply_market_price_sum
			add = var:electricity_delta_abs_multiply_market_price_sum
			add = var:clippers_delta_abs_multiply_market_price_sum
			add = var:steamers_delta_abs_multiply_market_price_sum
			add = var:silk_delta_abs_multiply_market_price_sum
			add = var:dye_delta_abs_multiply_market_price_sum
			add = var:sulfur_delta_abs_multiply_market_price_sum
			add = var:coal_delta_abs_multiply_market_price_sum
			add = var:iron_delta_abs_multiply_market_price_sum
			add = var:lead_delta_abs_multiply_market_price_sum
			add = var:hardwood_delta_abs_multiply_market_price_sum
			add = var:rubber_delta_abs_multiply_market_price_sum
			add = var:oil_delta_abs_multiply_market_price_sum	
			add = var:engines_delta_abs_multiply_market_price_sum
			add = var:steel_delta_abs_multiply_market_price_sum
			add = var:glass_delta_abs_multiply_market_price_sum
			add = var:fertilizer_delta_abs_multiply_market_price_sum
			add = var:tools_delta_abs_multiply_market_price_sum
			add = var:explosives_delta_abs_multiply_market_price_sum
			add = var:porcelain_delta_abs_multiply_market_price_sum
			add = var:meat_delta_abs_multiply_market_price_sum
			add = var:fruit_delta_abs_multiply_market_price_sum
			add = var:liquor_delta_abs_multiply_market_price_sum
			add = var:wine_delta_abs_multiply_market_price_sum
			add = var:tea_delta_abs_multiply_market_price_sum
			add = var:coffee_delta_abs_multiply_market_price_sum
			add = var:sugar_delta_abs_multiply_market_price_sum
			add = var:tobacco_delta_abs_multiply_market_price_sum
			add = var:opium_delta_abs_multiply_market_price_sum
			add = var:automobiles_delta_abs_multiply_market_price_sum
			add = var:telephones_delta_abs_multiply_market_price_sum
			add = var:radios_delta_abs_multiply_market_price_sum
			add = var:luxury_clothes_delta_abs_multiply_market_price_sum
			add = var:luxury_furniture_delta_abs_multiply_market_price_sum
			add = var:gold_delta_abs_multiply_market_price_sum
			add = var:fine_art_delta_abs_multiply_market_price_sum
		}
	}
}

clear_je_likin_stuffs = {
	hidden_effect = {
		remove_variable = goods_delta_abs_multiply_market_price_sum
		remove_variable = ammunition_delta_abs_multiply_market_price_sum
		remove_variable = small_arms_delta_abs_multiply_market_price_sum
		remove_variable = artillery_delta_abs_multiply_market_price_sum
		remove_variable = tanks_delta_abs_multiply_market_price_sum
		remove_variable = aeroplanes_delta_abs_multiply_market_price_sum
		remove_variable = manowars_delta_abs_multiply_market_price_sum
		remove_variable = ironclads_delta_abs_multiply_market_price_sum
		remove_variable = grain_delta_abs_multiply_market_price_sum
		remove_variable = fish_delta_abs_multiply_market_price_sum
		remove_variable = fabric_delta_abs_multiply_market_price_sum
		remove_variable = wood_delta_abs_multiply_market_price_sum
		remove_variable = groceries_delta_abs_multiply_market_price_sum
		remove_variable = clothes_delta_abs_multiply_market_price_sum
		remove_variable = furniture_delta_abs_multiply_market_price_sum
		remove_variable = paper_delta_abs_multiply_market_price_sum
		remove_variable = services_delta_abs_multiply_market_price_sum
		remove_variable = transportation_delta_abs_multiply_market_price_sum
		remove_variable = electricity_delta_abs_multiply_market_price_sum
		remove_variable = clippers_delta_abs_multiply_market_price_sum
		remove_variable = steamers_delta_abs_multiply_market_price_sum
		remove_variable = silk_delta_abs_multiply_market_price_sum
		remove_variable = dye_delta_abs_multiply_market_price_sum
		remove_variable = sulfur_delta_abs_multiply_market_price_sum
		remove_variable = coal_delta_abs_multiply_market_price_sum
		remove_variable = iron_delta_abs_multiply_market_price_sum
		remove_variable = lead_delta_abs_multiply_market_price_sum
		remove_variable = hardwood_delta_abs_multiply_market_price_sum
		remove_variable = rubber_delta_abs_multiply_market_price_sum
		remove_variable = oil_delta_abs_multiply_market_price_sum	
		remove_variable = engines_delta_abs_multiply_market_price_sum
		remove_variable = steel_delta_abs_multiply_market_price_sum
		remove_variable = glass_delta_abs_multiply_market_price_sum
		remove_variable = fertilizer_delta_abs_multiply_market_price_sum
		remove_variable = tools_delta_abs_multiply_market_price_sum
		remove_variable = explosives_delta_abs_multiply_market_price_sum
		remove_variable = porcelain_delta_abs_multiply_market_price_sum
		remove_variable = meat_delta_abs_multiply_market_price_sum
		remove_variable = fruit_delta_abs_multiply_market_price_sum
		remove_variable = liquor_delta_abs_multiply_market_price_sum
		remove_variable = wine_delta_abs_multiply_market_price_sum
		remove_variable = tea_delta_abs_multiply_market_price_sum
		remove_variable = coffee_delta_abs_multiply_market_price_sum
		remove_variable = sugar_delta_abs_multiply_market_price_sum
		remove_variable = tobacco_delta_abs_multiply_market_price_sum
		remove_variable = opium_delta_abs_multiply_market_price_sum
		remove_variable = automobiles_delta_abs_multiply_market_price_sum
		remove_variable = telephones_delta_abs_multiply_market_price_sum
		remove_variable = radios_delta_abs_multiply_market_price_sum
		remove_variable = luxury_clothes_delta_abs_multiply_market_price_sum
		remove_variable = luxury_furniture_delta_abs_multiply_market_price_sum
		remove_variable = gold_delta_abs_multiply_market_price_sum
		remove_variable = fine_art_delta_abs_multiply_market_price_sum
		remove_modifier = likin_tax_income_modifier
		remove_variable = likin_tax_income_modifier_multiplier
		remove_variable = likin_level_var
		remove_modifier = likin_authority_modifier
		every_state = {
			limit = { state_is_in_china_proper = yes }
			remove_modifier = likin_market_access_modifier
		}
	}
}